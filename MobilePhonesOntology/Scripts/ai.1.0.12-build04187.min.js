"use strict";var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Microsoft;!function(a){a.ApplicationInsights||(a.ApplicationInsights={})}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){var b=function(){function a(){}return a}();a.Base=b}(a.Telemetry||(a.Telemetry={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){var b=function(){function a(){this.ver=1,this.sampleRate=100,this.tags={}}return a}();a.Envelope=b}(a.Telemetry||(a.Telemetry={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){a.Context||(a.Context={})}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){a.Context||(a.Context={})}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){a.Context||(a.Context={})}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){a.Context||(a.Context={})}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){a.Context||(a.Context={})}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){a.Context||(a.Context={})}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){a.Context||(a.Context={})}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){a.Context||(a.Context={})}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){a.ApplicationInsights||(a.ApplicationInsights={})}(Microsoft||(Microsoft={}));var Microsoft;!function(a){a.ApplicationInsights||(a.ApplicationInsights={})}(Microsoft||(Microsoft={}));var Microsoft;!function(a){a.ApplicationInsights||(a.ApplicationInsights={})}(Microsoft||(Microsoft={}));var AI;!function(a){!function(a){a[a.Verbose=0]="Verbose",a[a.Information=1]="Information",a[a.Warning=2]="Warning",a[a.Error=3]="Error",a[a.Critical=4]="Critical"}(a.SeverityLevel||(a.SeverityLevel={}))}(AI||(AI={}));var Microsoft;!function(a){a.ApplicationInsights||(a.ApplicationInsights={})}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){var b;!function(a){a[a.CRITICAL=0]="CRITICAL",a[a.WARNING=1]="WARNING"}(b=a.LoggingSeverity||(a.LoggingSeverity={}));var c;!function(a){a[a.BrowserDoesNotSupportLocalStorage=0]="BrowserDoesNotSupportLocalStorage",a[a.BrowserCannotReadLocalStorage=1]="BrowserCannotReadLocalStorage",a[a.BrowserCannotReadSessionStorage=2]="BrowserCannotReadSessionStorage",a[a.BrowserCannotWriteLocalStorage=3]="BrowserCannotWriteLocalStorage",a[a.BrowserCannotWriteSessionStorage=4]="BrowserCannotWriteSessionStorage",a[a.BrowserFailedRemovalFromLocalStorage=5]="BrowserFailedRemovalFromLocalStorage",a[a.BrowserFailedRemovalFromSessionStorage=6]="BrowserFailedRemovalFromSessionStorage",a[a.CannotSendEmptyTelemetry=7]="CannotSendEmptyTelemetry",a[a.ClientPerformanceMathError=8]="ClientPerformanceMathError",a[a.ErrorParsingAISessionCookie=9]="ErrorParsingAISessionCookie",a[a.ErrorPVCalc=10]="ErrorPVCalc",a[a.ExceptionWhileLoggingError=11]="ExceptionWhileLoggingError",a[a.FailedAddingTelemetryToBuffer=12]="FailedAddingTelemetryToBuffer",a[a.FailedMonitorAjaxAbort=13]="FailedMonitorAjaxAbort",a[a.FailedMonitorAjaxDur=14]="FailedMonitorAjaxDur",a[a.FailedMonitorAjaxOpen=15]="FailedMonitorAjaxOpen",a[a.FailedMonitorAjaxRSC=16]="FailedMonitorAjaxRSC",a[a.FailedMonitorAjaxSend=17]="FailedMonitorAjaxSend",a[a.FailedToAddHandlerForOnBeforeUnload=18]="FailedToAddHandlerForOnBeforeUnload",a[a.FailedToSendQueuedTelemetry=19]="FailedToSendQueuedTelemetry",a[a.FailedToReportDataLoss=20]="FailedToReportDataLoss",a[a.FlushFailed=21]="FlushFailed",a[a.MessageLimitPerPVExceeded=22]="MessageLimitPerPVExceeded",a[a.MissingRequiredFieldSpecification=23]="MissingRequiredFieldSpecification",a[a.NavigationTimingNotSupported=24]="NavigationTimingNotSupported",a[a.OnError=25]="OnError",a[a.SessionRenewalDateIsZero=26]="SessionRenewalDateIsZero",a[a.SenderNotInitialized=27]="SenderNotInitialized",a[a.StartTrackEventFailed=28]="StartTrackEventFailed",a[a.StopTrackEventFailed=29]="StopTrackEventFailed",a[a.StartTrackFailed=30]="StartTrackFailed",a[a.StopTrackFailed=31]="StopTrackFailed",a[a.TelemetrySampledAndNotSent=32]="TelemetrySampledAndNotSent",a[a.TrackEventFailed=33]="TrackEventFailed",a[a.TrackExceptionFailed=34]="TrackExceptionFailed",a[a.TrackMetricFailed=35]="TrackMetricFailed",a[a.TrackPVFailed=36]="TrackPVFailed",a[a.TrackPVFailedCalc=37]="TrackPVFailedCalc",a[a.TrackTraceFailed=38]="TrackTraceFailed",a[a.TransmissionFailed=39]="TransmissionFailed",a[a.FailedToSetStorageBuffer=40]="FailedToSetStorageBuffer",a[a.FailedToRestoreStorageBuffer=41]="FailedToRestoreStorageBuffer",a[a.InvalidBackendResponse=42]="InvalidBackendResponse",a[a.FailedToFixDepricatedValues=43]="FailedToFixDepricatedValues",a[a.InvalidDurationValue=44]="InvalidDurationValue",a[a.CannotSerializeObject=45]="CannotSerializeObject",a[a.CannotSerializeObjectNonSerializable=46]="CannotSerializeObjectNonSerializable",a[a.CircularReferenceDetected=47]="CircularReferenceDetected",a[a.ClearAuthContextFailed=48]="ClearAuthContextFailed",a[a.ExceptionTruncated=49]="ExceptionTruncated",a[a.IllegalCharsInName=50]="IllegalCharsInName",a[a.ItemNotInArray=51]="ItemNotInArray",a[a.MaxAjaxPerPVExceeded=52]="MaxAjaxPerPVExceeded",a[a.MessageTruncated=53]="MessageTruncated",a[a.NameTooLong=54]="NameTooLong",a[a.SampleRateOutOfRange=55]="SampleRateOutOfRange",a[a.SetAuthContextFailed=56]="SetAuthContextFailed",a[a.SetAuthContextFailedAccountName=57]="SetAuthContextFailedAccountName",a[a.StringValueTooLong=58]="StringValueTooLong",a[a.StartCalledMoreThanOnce=59]="StartCalledMoreThanOnce",a[a.StopCalledWithoutStart=60]="StopCalledWithoutStart",a[a.TelemetryInitializerFailed=61]="TelemetryInitializerFailed",a[a.TrackArgumentsNotSpecified=62]="TrackArgumentsNotSpecified",a[a.UrlTooLong=63]="UrlTooLong",a[a.SessionStorageBufferFull=64]="SessionStorageBufferFull",a[a.CannotAccessCookie=65]="CannotAccessCookie"}(c=a._InternalMessageId||(a._InternalMessageId={}));var d=function(){function a(b,d,e,f){void 0===e&&(e=!1),this.messageId=b,this.message=(e?a.AiUserActionablePrefix:a.AiNonUserActionablePrefix)+c[b].toString();var g=(d?" message:"+a.sanitizeDiagnosticText(d):"")+(f?" props:"+a.sanitizeDiagnosticText(JSON.stringify(f)):"");this.message+=g}return a.sanitizeDiagnosticText=function(a){return'"'+a.replace(/\"/g,"")+'"'},a.AiNonUserActionablePrefix="AI (Internal): ",a.AiUserActionablePrefix="AI: ",a}();a._InternalLogMessage=d;var e=function(){function e(){}return e.throwInternal=function(a,b,e,f,g){void 0===g&&(g=!1);var h=new d(b,e,g,f);if(this.enableDebugExceptions())throw h;if(void 0!==h&&h&&void 0!==h.message){if(g){var i=c[h.messageId];this._messageLogged[i]&&!this.verboseLogging()||(this.warnToConsole(h.message),this._messageLogged[i]=!0)}else this.verboseLogging()&&this.warnToConsole(h.message);this.logInternalMessage(a,h)}},e.warnToConsole=function(a){"undefined"!=typeof console&&console&&("function"==typeof console.warn?console.warn(a):"function"==typeof console.log&&console.log(a))},e.resetInternalMessageCount=function(){this._messageCount=0,this._messageLogged={}},e.clearInternalMessageLoggedTypes=function(){if(a.Util.canUseSessionStorage())for(var b=a.Util.getSessionStorageKeys(),c=0;c<b.length;c++)0===b[c].indexOf(e.AIInternalMessagePrefix)&&a.Util.removeSessionStorage(b[c])},e.setMaxInternalMessageLimit=function(a){if(!a)throw new Error("limit cannot be undefined.");this.MAX_INTERNAL_MESSAGE_LIMIT=a},e.logInternalMessage=function(f,g){if(!this._areInternalMessagesThrottled()){var h=!0,i=e.AIInternalMessagePrefix+c[g.messageId];if(a.Util.canUseSessionStorage()){a.Util.getSessionStorage(i)?h=!1:a.Util.setSessionStorage(i,"1")}else this._messageLogged[i]?h=!1:this._messageLogged[i]=!0;if(h&&((this.verboseLogging()||f===b.CRITICAL)&&(this.queue.push(g),this._messageCount++),this._messageCount==this.MAX_INTERNAL_MESSAGE_LIMIT)){var j="Internal events throttle limit per PageView reached for this app.",k=new d(c.MessageLimitPerPVExceeded,j,!1);this.queue.push(k),this.warnToConsole(j)}}},e._areInternalMessagesThrottled=function(){return this._messageCount>=this.MAX_INTERNAL_MESSAGE_LIMIT},e.AIInternalMessagePrefix="AITR_",e.enableDebugExceptions=function(){return!1},e.verboseLogging=function(){return!1},e.queue=[],e.MAX_INTERNAL_MESSAGE_LIMIT=25,e._messageCount=0,e._messageLogged={},e}();a._InternalLogging=e}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){var b;!function(a){a[a.LocalStorage=0]="LocalStorage",a[a.SessionStorage=1]="SessionStorage"}(b||(b={}));var c=function(){function c(){}return c.disableStorage=function(){c._canUseLocalStorage=!1,c._canUseSessionStorage=!1},c._getLocalStorageObject=function(){return c.canUseLocalStorage()?c._getVerifiedStorageObject(b.LocalStorage):null},c._getVerifiedStorageObject=function(a){var c,d,e=null;try{d=new Date,e=a===b.LocalStorage?window.localStorage:window.sessionStorage,e.setItem(d,d),c=e.getItem(d)!=d,e.removeItem(d),c&&(e=null)}catch(a){e=null}return e},c.canUseLocalStorage=function(){return void 0===c._canUseLocalStorage&&(c._canUseLocalStorage=!!c._getVerifiedStorageObject(b.LocalStorage)),c._canUseLocalStorage},c.getStorage=function(b){var d=c._getLocalStorageObject();if(null!==d)try{return d.getItem(b)}catch(b){c._canUseLocalStorage=!1,a._InternalLogging.throwInternal(a.LoggingSeverity.WARNING,a._InternalMessageId.BrowserCannotReadLocalStorage,"Browser failed read of local storage. "+c.getExceptionName(b),{exception:c.dump(b)})}return null},c.setStorage=function(b,d){var e=c._getLocalStorageObject();if(null!==e)try{return e.setItem(b,d),!0}catch(b){c._canUseLocalStorage=!1,a._InternalLogging.throwInternal(a.LoggingSeverity.WARNING,a._InternalMessageId.BrowserCannotWriteLocalStorage,"Browser failed write to local storage. "+c.getExceptionName(b),{exception:c.dump(b)})}return!1},c.removeStorage=function(b){var d=c._getLocalStorageObject();if(null!==d)try{return d.removeItem(b),!0}catch(b){c._canUseLocalStorage=!1,a._InternalLogging.throwInternal(a.LoggingSeverity.WARNING,a._InternalMessageId.BrowserFailedRemovalFromLocalStorage,"Browser failed removal of local storage item. "+c.getExceptionName(b),{exception:c.dump(b)})}return!1},c._getSessionStorageObject=function(){return c.canUseSessionStorage()?c._getVerifiedStorageObject(b.SessionStorage):null},c.canUseSessionStorage=function(){return void 0===c._canUseSessionStorage&&(c._canUseSessionStorage=!!c._getVerifiedStorageObject(b.SessionStorage)),c._canUseSessionStorage},c.getSessionStorageKeys=function(){var a=[];if(c.canUseSessionStorage())for(var b in window.sessionStorage)a.push(b);return a},c.getSessionStorage=function(b){var d=c._getSessionStorageObject();if(null!==d)try{return d.getItem(b)}catch(b){c._canUseSessionStorage=!1,a._InternalLogging.throwInternal(a.LoggingSeverity.WARNING,a._InternalMessageId.BrowserCannotReadSessionStorage,"Browser failed read of session storage. "+c.getExceptionName(b),{exception:c.dump(b)})}return null},c.setSessionStorage=function(b,d){var e=c._getSessionStorageObject();if(null!==e)try{return e.setItem(b,d),!0}catch(b){c._canUseSessionStorage=!1,a._InternalLogging.throwInternal(a.LoggingSeverity.WARNING,a._InternalMessageId.BrowserCannotWriteSessionStorage,"Browser failed write to session storage. "+c.getExceptionName(b),{exception:c.dump(b)})}return!1},c.removeSessionStorage=function(b){var d=c._getSessionStorageObject();if(null!==d)try{return d.removeItem(b),!0}catch(b){c._canUseSessionStorage=!1,a._InternalLogging.throwInternal(a.LoggingSeverity.WARNING,a._InternalMessageId.BrowserFailedRemovalFromSessionStorage,"Browser failed removal of session storage item. "+c.getExceptionName(b),{exception:c.dump(b)})}return!1},c.disableCookies=function(){c._canUseCookies=!1},c.canUseCookies=function(){if(void 0===c._canUseCookies){c._canUseCookies=!1;try{c._canUseCookies=void 0!==c.document.cookie}catch(b){a._InternalLogging.throwInternal(a.LoggingSeverity.WARNING,a._InternalMessageId.CannotAccessCookie,"Cannot access document.cookie - "+c.getExceptionName(b),{exception:c.dump(b)})}}return c._canUseCookies},c.setCookie=function(a,b,d){var e="",f="";d&&(e=";domain="+d),c.document.location&&"https:"===c.document.location.protocol&&(f=";secure"),c.canUseCookies()&&(c.document.cookie=a+"="+b+e+";path=/"+f)},c.stringToBoolOrDefault=function(a,b){return void 0===b&&(b=!1),void 0===a||null===a?b:"true"===a.toString().toLowerCase()},c.getCookie=function(a){if(c.canUseCookies()){var b="";if(a&&a.length)for(var d=a+"=",e=c.document.cookie.split(";"),f=0;f<e.length;f++){var g=e[f];if((g=c.trim(g))&&0===g.indexOf(d)){b=g.substring(d.length,e[f].length);break}}return b}},c.deleteCookie=function(a){c.canUseCookies()&&(c.document.cookie=a+"=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;")},c.trim=function(a){return"string"!=typeof a?a:a.replace(/^\s+|\s+$/g,"")},c.newId=function(){for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b="",c=1073741824*Math.random();c>0;){b+=a.charAt(c%64),c=Math.floor(c/64)}return b},c.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)},c.isError=function(a){return"[object Error]"===Object.prototype.toString.call(a)},c.isDate=function(a){return"[object Date]"===Object.prototype.toString.call(a)},c.toISOStringForIE8=function(a){if(c.isDate(a)){if(Date.prototype.toISOString)return a.toISOString();var b=function(a){var b=String(a);return 1===b.length&&(b="0"+b),b};return a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"."+String((a.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}},c.getIEVersion=function(a){void 0===a&&(a=null);var b=a?a.toLowerCase():navigator.userAgent.toLowerCase();return-1!=b.indexOf("msie")?parseInt(b.split("msie")[1]):null},c.msToTimeSpan=function(a){(isNaN(a)||a<0)&&(a=0),a=Math.round(a);var b=""+a%1e3,c=""+Math.floor(a/1e3)%60,d=""+Math.floor(a/6e4)%60,e=""+Math.floor(a/36e5)%24,f=Math.floor(a/864e5);return b=1===b.length?"00"+b:2===b.length?"0"+b:b,c=c.length<2?"0"+c:c,d=d.length<2?"0"+d:d,e=e.length<2?"0"+e:e,(f>0?f+".":"")+e+":"+d+":"+c+"."+b},c.isCrossOriginError=function(a,b,c,d,e){return("Script error."===a||"Script error"===a)&&!e},c.dump=function(a){var b=Object.prototype.toString.call(a),c=JSON.stringify(a);return"[object Error]"===b&&(c="{ stack: '"+a.stack+"', message: '"+a.message+"', name: '"+a.name+"'"),b+c},c.getExceptionName=function(a){return"[object Error]"===Object.prototype.toString.call(a)?a.name:""},c.addEventHandler=function(a,b){if(!window||"string"!=typeof a||"function"!=typeof b)return!1;var c="on"+a;if(window.addEventListener)window.addEventListener(a,b,!1);else{if(!window.attachEvent)return!1;window.attachEvent.call(c,b)}return!0},c.IsBeaconApiSupported=function(){return"sendBeacon"in navigator&&navigator.sendBeacon},c.document="undefined"!=typeof document?document:{},c._canUseCookies=void 0,c._canUseLocalStorage=void 0,c._canUseSessionStorage=void 0,c.NotSpecified="not_specified",c}();a.Util=c;var d=function(){function a(){}return a.parseUrl=function(b){return a.htmlAnchorElement||(a.htmlAnchorElement=a.document.createElement?a.document.createElement("a"):{}),a.htmlAnchorElement.href=b,a.htmlAnchorElement},a.getAbsoluteUrl=function(b){var c,d=a.parseUrl(b);return d&&(c=d.href),c},a.getPathName=function(b){var c,d=a.parseUrl(b);return d&&(c=d.pathname),c},a.getCompleteUrl=function(a,b){return a?a.toUpperCase()+" "+b:b},a.document="undefined"!=typeof document?document:{},a}();a.UrlHelper=d}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){var b;!function(a){a[a.Default=0]="Default",a[a.Required=1]="Required",a[a.Array=2]="Array",a[a.Hidden=4]="Hidden"}(b=a.FieldType||(a.FieldType={}));var c=function(){function c(){}return c.serialize=function(a){var b=c._serializeObject(a,"root");return JSON.stringify(b)},c._serializeObject=function(d,e){var f={};if(!d)return a._InternalLogging.throwInternal(a.LoggingSeverity.CRITICAL,a._InternalMessageId.CannotSerializeObject,"cannot serialize object because it is null or undefined",{name:e},!0),f;if(d.__aiCircularRefCheck)return a._InternalLogging.throwInternal(a.LoggingSeverity.WARNING,a._InternalMessageId.CircularReferenceDetected,"Circular reference detected while serializing object",{name:e},!0),f;if(!d.aiDataContract){if("measurements"===e)f=c._serializeStringMap(d,"number",e);else if("properties"===e)f=c._serializeStringMap(d,"string",e);else if("tags"===e)f=c._serializeStringMap(d,"string",e);else if(a.Util.isArray(d))f=c._serializeArray(d,e);else{a._InternalLogging.throwInternal(a.LoggingSeverity.WARNING,a._InternalMessageId.CannotSerializeObjectNonSerializable,"Attempting to serialize an object which does not implement ISerializable",{name:e},!0);try{JSON.stringify(d),f=d}catch(b){a._InternalLogging.throwInternal(a.LoggingSeverity.CRITICAL,a._InternalMessageId.CannotSerializeObject,b&&"function"==typeof b.toString?b.toString():"Error serializing object",null,!0)}}return f}d.__aiCircularRefCheck=!0;for(var g in d.aiDataContract){var h=d.aiDataContract[g],i="function"==typeof h?h()&b.Required:h&b.Required,j="function"==typeof h?h()&b.Hidden:h&b.Hidden,k=h&b.Array,l=void 0!==d[g],m="object"==typeof d[g]&&null!==d[g];if(!i||l||k){if(!j){var n;n=m?k?c._serializeArray(d[g],g):c._serializeObject(d[g],g):d[g],void 0!==n&&(f[g]=n)}}else a._InternalLogging.throwInternal(a.LoggingSeverity.CRITICAL,a._InternalMessageId.MissingRequiredFieldSpecification,"Missing required field specification. The field is required but not present on source",{field:g,name:e})}return delete d.__aiCircularRefCheck,f},c._serializeArray=function(b,d){var e=void 0;if(b)if(a.Util.isArray(b)){e=[];for(var f=0;f<b.length;f++){var g=b[f],h=c._serializeObject(g,d+"["+f+"]");e.push(h)}}else a._InternalLogging.throwInternal(a.LoggingSeverity.CRITICAL,a._InternalMessageId.ItemNotInArray,"This field was specified as an array in the contract but the item is not an array.\r\n",{name:d},!0);return e},c._serializeStringMap=function(b,c,d){var e=void 0;if(b){e={};for(var f in b){var g=b[f];if("string"===c)void 0===g?e[f]="undefined":null===g?e[f]="null":g.toString?e[f]=g.toString():e[f]="invalid field: toString() is not defined.";else if("number"===c)if(void 0===g)e[f]="undefined";else if(null===g)e[f]="null";else{var h=parseFloat(g);isNaN(h)?e[f]="NaN":e[f]=h}else e[f]="invalid field: "+d+" is of unknown type.",a._InternalLogging.throwInternal(a.LoggingSeverity.CRITICAL,e[f],null,!0)}}return e},c}();a.Serializer=c}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(b){!function(c){!function(c){var d=function(a){function d(d,e){var f=a.call(this)||this;return f.name=c.DataSanitizer.sanitizeString(e)||b.Util.NotSpecified,f.data=d,f.time=b.Util.toISOStringForIE8(new Date),f.aiDataContract={time:b.FieldType.Required,iKey:b.FieldType.Required,name:b.FieldType.Required,sampleRate:function(){return 100==f.sampleRate?b.FieldType.Hidden:b.FieldType.Required},tags:b.FieldType.Required,data:b.FieldType.Required},f}return __extends(d,a),d}(a.Telemetry.Envelope);c.Envelope=d}(c.Common||(c.Common={}))}(b.Telemetry||(b.Telemetry={}))}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(b){!function(b){!function(b){var c=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.aiDataContract={},b}return __extends(b,a),b}(a.Telemetry.Base);b.Base=c}(b.Common||(b.Common={}))}(b.Telemetry||(b.Telemetry={}))}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var AI;!function(a){var b=function(){function a(){this.applicationVersion="ai.application.ver",this.applicationBuild="ai.application.build",this.applicationTypeId="ai.application.typeId",this.applicationId="ai.application.applicationId",this.deviceId="ai.device.id",this.deviceIp="ai.device.ip",this.deviceLanguage="ai.device.language",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceNetwork="ai.device.network",this.deviceNetworkName="ai.device.networkName",this.deviceOEMName="ai.device.oemName",this.deviceOS="ai.device.os",this.deviceOSVersion="ai.device.osVersion",this.deviceRoleInstance="ai.device.roleInstance",this.deviceRoleName="ai.device.roleName",this.deviceScreenResolution="ai.device.screenResolution",this.deviceType="ai.device.type",this.deviceMachineName="ai.device.machineName",this.deviceVMName="ai.device.vmName",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationRootId="ai.operation.rootId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationIsSynthetic="ai.operation.isSynthetic",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.sessionIsNew="ai.session.isNew",this.userAccountAcquisitionDate="ai.user.accountAcquisitionDate",this.userAccountId="ai.user.accountId",this.userAgent="ai.user.userAgent",this.userId="ai.user.id",this.userStoreRegion="ai.user.storeRegion",this.userAuthUserId="ai.user.authUserId",this.userAnonymousUserAcquisitionDate="ai.user.anonUserAcquisitionDate",this.userAuthenticatedUserAcquisitionDate="ai.user.authUserAcquisitionDate",this.sampleRate="ai.sample.sampleRate",this.cloudName="ai.cloud.name",this.cloudRoleVer="ai.cloud.roleVer",this.cloudEnvironment="ai.cloud.environment",this.cloudLocation="ai.cloud.location",this.cloudDeploymentUnit="ai.cloud.deploymentUnit",this.serverDeviceOS="ai.serverDevice.os",this.serverDeviceOSVer="ai.serverDevice.osVer",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalDataCollectorReceivedTime="ai.internal.dataCollectorReceivedTime",this.internalProfileId="ai.internal.profileId",this.internalProfileClassId="ai.internal.profileClassId",this.internalAccountId="ai.internal.accountId",this.internalApplicationName="ai.internal.applicationName",this.internalInstrumentationKey="ai.internal.instrumentationKey",this.internalTelemetryItemId="ai.internal.telemetryItemId",this.internalApplicationType="ai.internal.applicationType",this.internalRequestSource="ai.internal.requestSource",this.internalFlowType="ai.internal.flowType",this.internalIsAudit="ai.internal.isAudit",this.internalTrackingSourceId="ai.internal.trackingSourceId",this.internalTrackingType="ai.internal.trackingType",this.internalIsDiagnosticExample="ai.internal.isDiagnosticExample"}return a}();a.ContextTagKeys=b}(AI||(AI={}));var Microsoft;!function(a){!function(a){!function(a){var b=function(){function a(){}return a}();a.Application=b}(a.Context||(a.Context={}))}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){!function(a){var b=function(){function a(){this.id="browser",this.type="Browser"}return a}();a.Device=b}(a.Context||(a.Context={}))}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){!function(b){var c=function(){function b(b){this.sdkVersion=(b.sdkExtension()?b.sdkExtension()+"_":"")+"javascript:"+a.Version}return b}();b.Internal=c}(a.Context||(a.Context={}))}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){!function(a){var b=function(){function a(){}return a}();a.Location=b}(a.Context||(a.Context={}))}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){!function(b){var c=function(){function b(){this.id=a.Util.newId(),window&&window.location&&window.location.pathname&&(this.name=window.location.pathname)}return b}();b.Operation=c}(a.Context||(a.Context={}))}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){var b=function(){function a(){}return a.prototype.getHashCodeScore=function(b){return this.getHashCode(b)/a.INT_MAX_VALUE*100},a.prototype.getHashCode=function(b){if(""==b)return 0;for(;b.length<a.MIN_INPUT_LENGTH;)b=b.concat(b);for(var c=5381,d=0;d<b.length;++d)c=(c<<5)+c+b.charCodeAt(d),c&=c;return Math.abs(c)},a.INT_MAX_VALUE=2147483647,a.MIN_INPUT_LENGTH=8,a}();a.HashCodeScoreGenerator=b}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){var b=function(){function b(){this.hashCodeGeneragor=new a.HashCodeScoreGenerator}return b.prototype.getSamplingScore=function(a){var b=new AI.ContextTagKeys;return a.tags[b.userId]?this.hashCodeGeneragor.getHashCodeScore(a.tags[b.userId]):a.tags[b.operationId]?this.hashCodeGeneragor.getHashCodeScore(a.tags[b.operationId]):Math.random()},b}();a.SamplingScoreGenerator=b}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){!function(b){var c=function(){function b(b){this.INT_MAX_VALUE=2147483647,(b>100||b<0)&&(a._InternalLogging.throwInternal(a.LoggingSeverity.WARNING,a._InternalMessageId.SampleRateOutOfRange,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:b},!0),this.sampleRate=100),this.sampleRate=b,this.samplingScoreGenerator=new a.SamplingScoreGenerator}return b.prototype.isSampledIn=function(a){return 100==this.sampleRate||this.samplingScoreGenerator.getSamplingScore(a)<this.sampleRate},b}();b.Sample=c}(a.Context||(a.Context={}))}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var AI;!function(a){!function(a){a[a.Start=0]="Start",a[a.End=1]="End"}(a.SessionState||(a.SessionState={}))}(AI||(AI={}));var Microsoft;!function(a){!function(a){!function(b){var c=function(){function a(){}return a}();b.Session=c;var d=function(){function b(a){a||(a={}),"function"!=typeof a.sessionExpirationMs&&(a.sessionExpirationMs=function(){return b.acquisitionSpan}),"function"!=typeof a.sessionRenewalMs&&(a.sessionRenewalMs=function(){return b.renewalSpan}),this.config=a,this.automaticSession=new c}return b.prototype.update=function(){this.automaticSession.id||this.initializeAutomaticSession();var c=a.dateTime.Now(),d=c-this.automaticSession.acquisitionDate>this.config.sessionExpirationMs(),e=c-this.automaticSession.renewalDate>this.config.sessionRenewalMs();d||e?(this.automaticSession.isFirst=void 0,this.renew()):(!this.cookieUpdatedTimestamp||c-this.cookieUpdatedTimestamp>b.cookieUpdateInterval)&&(this.automaticSession.renewalDate=c,this.setCookie(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate))},b.prototype.backup=function(){this.setStorage(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate)},b.prototype.initializeAutomaticSession=function(){var b=a.Util.getCookie("ai_session");if(b&&"function"==typeof b.split)this.initializeAutomaticSessionWithData(b);else{var c=a.Util.getStorage("ai_session");c&&this.initializeAutomaticSessionWithData(c)}this.automaticSession.id||(this.automaticSession.isFirst=!0,this.renew())},b.prototype.initializeAutomaticSessionWithData=function(b){var c=b.split("|");c.length>0&&(this.automaticSession.id=c[0]);try{if(c.length>1){var d=+c[1];this.automaticSession.acquisitionDate=+new Date(d),this.automaticSession.acquisitionDate=this.automaticSession.acquisitionDate>0?this.automaticSession.acquisitionDate:0}if(c.length>2){var e=+c[2];this.automaticSession.renewalDate=+new Date(e),this.automaticSession.renewalDate=this.automaticSession.renewalDate>0?this.automaticSession.renewalDate:0}}catch(b){a._InternalLogging.throwInternal(a.LoggingSeverity.CRITICAL,a._InternalMessageId.ErrorParsingAISessionCookie,"Error parsing ai_session cookie, session will be reset: "+a.Util.getExceptionName(b),{exception:a.Util.dump(b)})}0==this.automaticSession.renewalDate&&a._InternalLogging.throwInternal(a.LoggingSeverity.WARNING,a._InternalMessageId.SessionRenewalDateIsZero,"AI session renewal date is 0, session will be reset.")},b.prototype.renew=function(){var b=a.dateTime.Now();this.automaticSession.id=a.Util.newId(),this.automaticSession.acquisitionDate=b,this.automaticSession.renewalDate=b,this.setCookie(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate),a.Util.canUseLocalStorage()||a._InternalLogging.throwInternal(a.LoggingSeverity.WARNING,a._InternalMessageId.BrowserDoesNotSupportLocalStorage,"Browser does not support local storage. Session durations will be inaccurate.")},b.prototype.setCookie=function(b,c,d){var e=c+this.config.sessionExpirationMs(),f=d+this.config.sessionRenewalMs(),g=new Date,h=[b,c,d];e<f?g.setTime(e):g.setTime(f);var i=this.config.cookieDomain?this.config.cookieDomain():null;a.Util.setCookie("ai_session",h.join("|")+";expires="+g.toUTCString(),i),this.cookieUpdatedTimestamp=a.dateTime.Now()},b.prototype.setStorage=function(b,c,d){a.Util.setStorage("ai_session",[b,c,d].join("|"))},b.acquisitionSpan=864e5,b.renewalSpan=18e5,b.cookieUpdateInterval=6e4,b}();b._SessionManager=d}(a.Context||(a.Context={}))}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){!function(b){var c=function(){function b(c){var d=a.Util.getCookie(b.userCookieName);if(d){var e=d.split(b.cookieSeparator);e.length>0&&(this.id=e[0])}if(this.config=c,!this.id){this.id=a.Util.newId();var f=new Date,g=a.Util.toISOStringForIE8(f);this.accountAcquisitionDate=g,f.setTime(f.getTime()+31536e6);var h=[this.id,g],i=this.config.cookieDomain?this.config.cookieDomain():void 0;a.Util.setCookie(b.userCookieName,h.join(b.cookieSeparator)+";expires="+f.toUTCString(),i),a.Util.removeStorage("ai_session")}this.accountId=c.accountId?c.accountId():void 0;var j=a.Util.getCookie(b.authUserCookieName);if(j){j=decodeURI(j);var k=j.split(b.cookieSeparator);k[0]&&(this.authenticatedId=k[0]),k.length>1&&k[1]&&(this.accountId=k[1])}}return b.prototype.setAuthenticatedUserContext=function(c,d){if(!this.validateUserInput(c)||d&&!this.validateUserInput(d))return void a._InternalLogging.throwInternal(a.LoggingSeverity.WARNING,a._InternalMessageId.SetAuthContextFailedAccountName,"Setting auth user context failed. User auth/account id should be of type string, and not contain commas, semi-colons, equal signs, spaces, or vertical-bars.",!0);this.authenticatedId=c;var e=this.authenticatedId;d&&(this.accountId=d,e=[this.authenticatedId,this.accountId].join(b.cookieSeparator)),a.Util.setCookie(b.authUserCookieName,encodeURI(e),this.config.cookieDomain())},b.prototype.clearAuthenticatedUserContext=function(){this.authenticatedId=null,this.accountId=null,a.Util.deleteCookie(b.authUserCookieName)},b.prototype.validateUserInput=function(a){return!("string"!=typeof a||!a||a.match(/,|;|=| |\|/))},b.cookieSeparator="|",b.userCookieName="ai_user",b.authUserCookieName="ai_authUser",b}();b.User=c}(a.Context||(a.Context={}))}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){
var b=function(){function a(){}return a.IsNullOrUndefined=function(a){return void 0===a||null===a},a}();a.extensions=b;var c=function(){function a(){}return a.GetLength=function(a){var c=0;if(!b.IsNullOrUndefined(a)){var d="";try{d=a.toString()}catch(a){}c=d.length,c=isNaN(c)?0:c}return c},a}();a.stringUtils=c;var d=function(){function a(){}return a.Now=window.performance&&window.performance.now&&window.performance.timing?function(){return window.performance.now()+window.performance.timing.navigationStart}:function(){return(new Date).getTime()},a.GetDuration=function(a,c){var d=null;return 0===a||0===c||b.IsNullOrUndefined(a)||b.IsNullOrUndefined(c)||(d=c-a),d},a}();a.dateTime=d;var e=function(){function a(){}return a.AttachEvent=function(a,c,d){var e=!1;return b.IsNullOrUndefined(a)||(b.IsNullOrUndefined(a.attachEvent)?b.IsNullOrUndefined(a.addEventListener)||(a.addEventListener(c,d,!1),e=!0):(a.attachEvent("on"+c,d),e=!0)),e},a.DetachEvent=function(a,c,d){b.IsNullOrUndefined(a)||(b.IsNullOrUndefined(a.detachEvent)?b.IsNullOrUndefined(a.removeEventListener)||a.removeEventListener(c,d,!1):a.detachEvent("on"+c,d))},a}();a.EventHelper=e}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){var b=function(){function a(){this.openDone=!1,this.setRequestHeaderDone=!1,this.sendDone=!1,this.abortDone=!1,this.onreadystatechangeCallbackAttached=!1}return a}();a.XHRMonitoringState=b;var c=function(){function c(c){this.completed=!1,this.requestHeadersSize=null,this.ttfb=null,this.responseReceivingDuration=null,this.callbackDuration=null,this.ajaxTotalDuration=null,this.aborted=null,this.pageUrl=null,this.requestUrl=null,this.requestSize=0,this.method=null,this.status=null,this.requestSentTime=null,this.responseStartedTime=null,this.responseFinishedTime=null,this.callbackFinishedTime=null,this.endTime=null,this.originalOnreadystatechage=null,this.xhrMonitoringState=new b,this.clientFailure=0,this.CalculateMetrics=function(){var b=this;b.ajaxTotalDuration=Math.round(1e3*a.dateTime.GetDuration(b.requestSentTime,b.responseFinishedTime))/1e3},this.id=c}return c.prototype.getAbsoluteUrl=function(){return this.requestUrl?a.UrlHelper.getAbsoluteUrl(this.requestUrl):null},c.prototype.getPathName=function(){return this.requestUrl?a.Telemetry.Common.DataSanitizer.sanitizeUrl(a.UrlHelper.getCompleteUrl(this.method,this.requestUrl)):null},c}();a.ajaxRecord=c}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(b){var c=function(){function c(a){this.currentWindowHost=window.location.host,this.appInsights=a,this.initialized=!1,this.Init()}return c.prototype.Init=function(){this.supportsMonitoring()&&(this.instrumentOpen(),this.instrumentSend(),this.instrumentAbort(),this.initialized=!0)},c.prototype.isMonitoredInstance=function(a,d){return this.initialized&&(!0===d||!b.extensions.IsNullOrUndefined(a.ajaxData))&&!0!==a[c.DisabledPropertyName]},c.prototype.supportsMonitoring=function(){var a=!1;return b.extensions.IsNullOrUndefined(XMLHttpRequest)||(a=!0),a},c.prototype.instrumentOpen=function(){var d=XMLHttpRequest.prototype.open,e=this;XMLHttpRequest.prototype.open=function(f,g,h){try{!e.isMonitoredInstance(this,!0)||this.ajaxData&&this.ajaxData.xhrMonitoringState.openDone||e.openHandler(this,f,g,h)}catch(d){b._InternalLogging.throwInternal(b.LoggingSeverity.CRITICAL,b._InternalMessageId.FailedMonitorAjaxOpen,"Failed to monitor XMLHttpRequest.open, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:c.getFailedAjaxDiagnosticsMessage(this),exception:a.ApplicationInsights.Util.dump(d)})}return d.apply(this,arguments)}},c.prototype.openHandler=function(a,c,d,e){var f=new b.ajaxRecord(b.Util.newId());f.method=c,f.requestUrl=d,f.xhrMonitoringState.openDone=!0,a.ajaxData=f,this.attachToOnReadyStateChange(a)},c.getFailedAjaxDiagnosticsMessage=function(a){var c="";try{b.extensions.IsNullOrUndefined(a)||b.extensions.IsNullOrUndefined(a.ajaxData)||b.extensions.IsNullOrUndefined(a.ajaxData.requestUrl)||(c+="(url: '"+a.ajaxData.requestUrl+"')")}catch(a){}return c},c.prototype.instrumentSend=function(){var d=XMLHttpRequest.prototype.send,e=this;XMLHttpRequest.prototype.send=function(f){try{e.isMonitoredInstance(this)&&!this.ajaxData.xhrMonitoringState.sendDone&&e.sendHandler(this,f)}catch(d){b._InternalLogging.throwInternal(b.LoggingSeverity.CRITICAL,b._InternalMessageId.FailedMonitorAjaxSend,"Failed to monitor XMLHttpRequest, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:c.getFailedAjaxDiagnosticsMessage(this),exception:a.ApplicationInsights.Util.dump(d)})}return d.apply(this,arguments)}},c.prototype.sendHandler=function(a,c){if(a.ajaxData.requestSentTime=b.dateTime.Now(),!this.appInsights.config.disableCorrelationHeaders&&b.UrlHelper.parseUrl(a.ajaxData.getAbsoluteUrl()).host==this.currentWindowHost){var d=this.appInsights.context.operation.id;a.setRequestHeader("x-ms-request-root-id",d),a.setRequestHeader("x-ms-request-id",a.ajaxData.id)}a.ajaxData.xhrMonitoringState.sendDone=!0},c.prototype.instrumentAbort=function(){var d=XMLHttpRequest.prototype.abort,e=this;XMLHttpRequest.prototype.abort=function(){try{e.isMonitoredInstance(this)&&!this.ajaxData.xhrMonitoringState.abortDone&&(this.ajaxData.aborted=1,this.ajaxData.xhrMonitoringState.abortDone=!0)}catch(d){b._InternalLogging.throwInternal(b.LoggingSeverity.CRITICAL,b._InternalMessageId.FailedMonitorAjaxAbort,"Failed to monitor XMLHttpRequest.abort, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:c.getFailedAjaxDiagnosticsMessage(this),exception:a.ApplicationInsights.Util.dump(d)})}return d.apply(this,arguments)}},c.prototype.attachToOnReadyStateChange=function(d){var e=this;d.ajaxData.xhrMonitoringState.onreadystatechangeCallbackAttached=b.EventHelper.AttachEvent(d,"readystatechange",function(){try{e.isMonitoredInstance(d)&&4===d.readyState&&e.onAjaxComplete(d)}catch(e){var f=a.ApplicationInsights.Util.dump(e);f&&-1!=f.toLowerCase().indexOf("c00c023f")||b._InternalLogging.throwInternal(b.LoggingSeverity.CRITICAL,b._InternalMessageId.FailedMonitorAjaxRSC,"Failed to monitor XMLHttpRequest 'readystatechange' event handler, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:c.getFailedAjaxDiagnosticsMessage(d),exception:a.ApplicationInsights.Util.dump(e)})}})},c.prototype.onAjaxComplete=function(a){a.ajaxData.responseFinishedTime=b.dateTime.Now(),a.ajaxData.status=a.status,a.ajaxData.CalculateMetrics(),a.ajaxData.ajaxTotalDuration<0?b._InternalLogging.throwInternal(b.LoggingSeverity.WARNING,b._InternalMessageId.FailedMonitorAjaxDur,"Failed to calculate the duration of the ajax call, monitoring data for this ajax call won't be sent.",{ajaxDiagnosticsMessage:c.getFailedAjaxDiagnosticsMessage(a),requestSentTime:a.ajaxData.requestSentTime,responseFinishedTime:a.ajaxData.responseFinishedTime}):(this.appInsights.trackDependency(a.ajaxData.id,a.ajaxData.method,a.ajaxData.getAbsoluteUrl(),a.ajaxData.getPathName(),a.ajaxData.ajaxTotalDuration,+a.ajaxData.status>=200&&+a.ajaxData.status<400,+a.ajaxData.status),a.ajaxData=null)},c.instrumentedByAppInsightsName="InstrumentedByAppInsights",c.DisabledPropertyName="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",c}();b.AjaxMonitor=c}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){var b=function(){function a(a){this._config=a,this._buffer=[]}return a.prototype.enqueue=function(a){this._buffer.push(a)},a.prototype.count=function(){return this._buffer.length},a.prototype.clear=function(){this._buffer.length=0},a.prototype.getItems=function(){return this._buffer.slice(0)},a.prototype.batchPayloads=function(a){if(a&&a.length>0){return this._config.emitLineDelimitedJson()?a.join("\n"):"["+a.join(",")+"]"}return null},a.prototype.markAsSent=function(a){this.clear()},a.prototype.clearSent=function(a){},a}();a.ArraySendBuffer=b;var c=function(){function b(a){this._bufferFullMessageSent=!1,this._config=a;var c=this.getBuffer(b.BUFFER_KEY),d=this.getBuffer(b.SENT_BUFFER_KEY);this._buffer=c.concat(d),this._buffer.length>b.MAX_BUFFER_SIZE&&(this._buffer.length=b.MAX_BUFFER_SIZE),this.setBuffer(b.SENT_BUFFER_KEY,[]),this.setBuffer(b.BUFFER_KEY,this._buffer)}return b.prototype.enqueue=function(c){if(this._buffer.length>=b.MAX_BUFFER_SIZE)return void(this._bufferFullMessageSent||(a._InternalLogging.throwInternal(a.LoggingSeverity.WARNING,a._InternalMessageId.SessionStorageBufferFull,"Maximum buffer size reached: "+this._buffer.length,!0),this._bufferFullMessageSent=!0));this._buffer.push(c),this.setBuffer(b.BUFFER_KEY,this._buffer)},b.prototype.count=function(){return this._buffer.length},b.prototype.clear=function(){this._buffer.length=0,this.setBuffer(b.BUFFER_KEY,[]),this.setBuffer(b.SENT_BUFFER_KEY,[]),this._bufferFullMessageSent=!1},b.prototype.getItems=function(){return this._buffer.slice(0)},b.prototype.batchPayloads=function(a){if(a&&a.length>0){return this._config.emitLineDelimitedJson()?a.join("\n"):"["+a.join(",")+"]"}return null},b.prototype.markAsSent=function(c){this._buffer=this.removePayloadsFromBuffer(c,this._buffer),this.setBuffer(b.BUFFER_KEY,this._buffer);var d=this.getBuffer(b.SENT_BUFFER_KEY);d instanceof Array&&c instanceof Array&&(d=d.concat(c),d.length>b.MAX_BUFFER_SIZE&&(a._InternalLogging.throwInternal(a.LoggingSeverity.CRITICAL,a._InternalMessageId.SessionStorageBufferFull,"Sent buffer reached its maximum size: "+d.length,!0),d.length=b.MAX_BUFFER_SIZE),this.setBuffer(b.SENT_BUFFER_KEY,d))},b.prototype.clearSent=function(a){var c=this.getBuffer(b.SENT_BUFFER_KEY);c=this.removePayloadsFromBuffer(a,c),this.setBuffer(b.SENT_BUFFER_KEY,c)},b.prototype.removePayloadsFromBuffer=function(a,b){var c=[];for(var d in b){var e=!1;for(var f in a)if(a[f]===b[d]){e=!0;break}e||c.push(b[d])}return c},b.prototype.getBuffer=function(b){try{var c=a.Util.getSessionStorage(b);if(c){var d=JSON.parse(c);if(d)return d}}catch(c){a._InternalLogging.throwInternal(a.LoggingSeverity.CRITICAL,a._InternalMessageId.FailedToRestoreStorageBuffer," storage key: "+b+", "+a.Util.getExceptionName(c),{exception:a.Util.dump(c)})}return[]},b.prototype.setBuffer=function(b,c){try{var d=JSON.stringify(c);a.Util.setSessionStorage(b,d)}catch(c){a.Util.setSessionStorage(b,JSON.stringify([])),a._InternalLogging.throwInternal(a.LoggingSeverity.WARNING,a._InternalMessageId.FailedToSetStorageBuffer," storage key: "+b+", "+a.Util.getExceptionName(c)+". Buffer cleared",{exception:a.Util.dump(c)})}},b.BUFFER_KEY="AI_buffer",b.SENT_BUFFER_KEY="AI_sentBuffer",b.MAX_BUFFER_SIZE=2e3,b}();a.SessionStorageSendBuffer=c}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){var b=function(){function b(b){if(this._XMLHttpRequestSupported=!1,this._consecutiveErrors=0,this._retryAt=null,this._lastSend=0,this._config=b,this._sender=null,this._buffer=a.Util.canUseSessionStorage()&&this._config.enableSessionStorageBuffer()?new a.SessionStorageSendBuffer(b):new a.ArraySendBuffer(b),!this._config.isBeaconApiDisabled()&&a.Util.IsBeaconApiSupported())this._sender=this._beaconSender;else if("undefined"!=typeof XMLHttpRequest){var c=new XMLHttpRequest;"withCredentials"in c?(this._sender=this._xhrSender,this._XMLHttpRequestSupported=!0):"undefined"!=typeof XDomainRequest&&(this._sender=this._xdrSender)}}return b.prototype.send=function(b){try{if(this._config.disableTelemetry())return;if(!b)return void a._InternalLogging.throwInternal(a.LoggingSeverity.CRITICAL,a._InternalMessageId.CannotSendEmptyTelemetry,"Cannot send empty telemetry");if(!this._sender)return void a._InternalLogging.throwInternal(a.LoggingSeverity.CRITICAL,a._InternalMessageId.SenderNotInitialized,"Sender was not initialized");var c=a.Serializer.serialize(b),d=this._buffer.getItems(),e=this._buffer.batchPayloads(d);e&&e.length+c.length>this._config.maxBatchSizeInBytes()&&this.triggerSend(),this._buffer.enqueue(c),this._setupTimer()}catch(b){a._InternalLogging.throwInternal(a.LoggingSeverity.WARNING,a._InternalMessageId.FailedAddingTelemetryToBuffer,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+a.Util.getExceptionName(b),{exception:a.Util.dump(b)})}},b.prototype._setupTimer=function(){var a=this;if(!this._timeoutHandle){var b=this._retryAt?Math.max(0,this._retryAt-Date.now()):0,c=Math.max(this._config.maxBatchInterval(),b);this._timeoutHandle=setTimeout(function(){a.triggerSend()},c)}},b.prototype._getSizeInBytes=function(a){var b=0;if(a&&a.length)for(var c=0;c<a.length;c++){var d=a[c];d&&d.length&&(b+=d.length)}return b},b.prototype.triggerSend=function(b){void 0===b&&(b=!0);try{if(this._config.disableTelemetry())this._buffer.clear();else{if(this._buffer.count()>0){var c=this._buffer.getItems();this._sender(c,b)}this._lastSend=+new Date}clearTimeout(this._timeoutHandle),this._timeoutHandle=null,this._retryAt=null}catch(b){(!a.Util.getIEVersion()||a.Util.getIEVersion()>9)&&a._InternalLogging.throwInternal(a.LoggingSeverity.CRITICAL,a._InternalMessageId.TransmissionFailed,"Telemetry transmission failed, some telemetry will be lost: "+a.Util.getExceptionName(b),{exception:a.Util.dump(b)})}},b.prototype._setRetryTime=function(){var a;if(this._consecutiveErrors<=1)a=10;else{var b=(Math.pow(2,this._consecutiveErrors)-1)/2,c=Math.floor(Math.random()*b*10)+1;a=Math.max(Math.min(c,3600),10)}var d=Date.now()+1e3*a;this._retryAt=d},b.prototype._parseResponse=function(b){try{var c=JSON.parse(b);if(c&&c.itemsReceived&&c.itemsReceived>=c.itemsAccepted&&c.itemsReceived-c.itemsAccepted==c.errors.length)return c}catch(b){a._InternalLogging.throwInternal(a.LoggingSeverity.CRITICAL,a._InternalMessageId.InvalidBackendResponse,"Cannot parse the response. "+a.Util.getExceptionName(b))}return null},b.prototype._isRetriable=function(a){return 408==a||429==a||500==a||503==a},b.prototype._resendPayload=function(a){if(a&&0!==a.length){this._buffer.clearSent(a),this._consecutiveErrors++;for(var b=0,c=a;b<c.length;b++){var d=c[b];this._buffer.enqueue(d)}this._setRetryTime(),this._setupTimer()}},b.prototype._formatErrorMessageXhr=function(a,b){return a?"XMLHttpRequest,Status:"+a.status+",Response:"+a.responseText||a.response||"":b},b.prototype._formatErrorMessageXdr=function(a,b){return a?"XDomainRequest,Response:"+a.responseText||"":b},b.prototype._xhrSender=function(b,c){var d=this,e=new XMLHttpRequest;e[a.AjaxMonitor.DisabledPropertyName]=!0,e.open("POST",this._config.endpointUrl(),c),e.setRequestHeader("Content-type","application/json"),e.onreadystatechange=function(){return d._xhrReadyStateChange(e,b,b.length)},e.onerror=function(a){return d._onError(b,d._formatErrorMessageXhr(e),a)};var f=this._buffer.batchPayloads(b);e.send(f),this._buffer.markAsSent(b)},b.prototype._xdrSender=function(b,c){var d=this,e=new XDomainRequest;e.onload=function(){return d._xdrOnLoad(e,b)},e.onerror=function(a){return d._onError(b,d._formatErrorMessageXdr(e),a)};var f=window.location.protocol;if(0!==this._config.endpointUrl().lastIndexOf(f,0))return a._InternalLogging.throwInternal(a.LoggingSeverity.WARNING,a._InternalMessageId.TransmissionFailed,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),void this._buffer.clear();var g=this._config.endpointUrl().replace(/^(https?:)/,"");e.open("POST",g);var h=this._buffer.batchPayloads(b);e.send(h),this._buffer.markAsSent(b)},b.prototype._beaconSender=function(b,c){var d=this._config.endpointUrl(),e=this._buffer.batchPayloads(b);navigator.sendBeacon(d,e)?this._buffer.markAsSent(b):a._InternalLogging.throwInternal(a.LoggingSeverity.CRITICAL,a._InternalMessageId.TransmissionFailed,". Failed to send telemetry with Beacon API.")},b.prototype._xhrReadyStateChange=function(b,c,d){if(4===b.readyState)if((b.status<200||b.status>=300)&&0!==b.status)!this._config.isRetryDisabled()&&this._isRetriable(b.status)?(this._resendPayload(c),a._InternalLogging.throwInternal(a.LoggingSeverity.WARNING,a._InternalMessageId.TransmissionFailed,". Response code "+b.status+". Will retry to send "+c.length+" items.")):this._onError(c,this._formatErrorMessageXhr(b));else if(206===b.status){var e=this._parseResponse(b.responseText||b.response);e&&!this._config.isRetryDisabled()?this._onPartialSuccess(c,e):this._onError(c,this._formatErrorMessageXhr(b))}else this._consecutiveErrors=0,this._onSuccess(c,d)},b.prototype._xdrOnLoad=function(a,b){if(!a||a.responseText+""!="200"&&""!==a.responseText){var c=this._parseResponse(a.responseText);c&&c.itemsReceived&&c.itemsReceived>c.itemsAccepted&&!this._config.isRetryDisabled()?this._onPartialSuccess(b,c):this._onError(b,this._formatErrorMessageXdr(a))}else this._consecutiveErrors=0,this._onSuccess(b,0)},b.prototype._onPartialSuccess=function(b,c){for(var d=[],e=[],f=c.errors.reverse(),g=0,h=f;g<h.length;g++){var i=h[g],j=b.splice(i.index,1)[0];this._isRetriable(i.statusCode)?e.push(j):d.push(j)}b.length>0&&this._onSuccess(b,c.itemsAccepted),d.length>0&&this._onError(d,this._formatErrorMessageXhr(null,["partial success",c.itemsAccepted,"of",c.itemsReceived].join(" "))),e.length>0&&(this._resendPayload(e),a._InternalLogging.throwInternal(a.LoggingSeverity.WARNING,a._InternalMessageId.TransmissionFailed,"Partial success. Delivered: "+b.length+", Failed: "+d.length+". Will retry to send "+e.length+" our of "+c.itemsReceived+" items"))},b.prototype._onError=function(b,c,d){a._InternalLogging.throwInternal(a.LoggingSeverity.WARNING,a._InternalMessageId.OnError,"Failed to send telemetry.",{message:c}),this._buffer.clearSent(b)},b.prototype._onSuccess=function(a,b){this._buffer.clearSent(a)},b.MaxBeaconPayloadSize=65536,b}();a.Sender=b}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){var b=function(){function a(){}return a}();a.Domain=b}(a.Telemetry||(a.Telemetry={}))}(Microsoft||(Microsoft={}));var AI;!function(a){var b=function(a){function b(){var b=a.call(this)||this;return b.ver=2,b.properties={},b=a.call(this)||this}return __extends(b,a),b}(Microsoft.Telemetry.Domain);a.MessageData=b}(AI||(AI={}));var Microsoft;!function(a){!function(a){!function(b){!function(b){var c=function(){function b(){}return b.sanitizeKeyAndAddUniqueness=function(a,c){var d=a.length,e=b.sanitizeKey(a);if(e.length!==d){for(var f=0,g=e;void 0!==c[g];)f++,g=e.substring(0,b.MAX_NAME_LENGTH-3)+b.padNumber(f);e=g}return e},b.sanitizeKey=function(c){return c&&(c=a.Util.trim(c.toString()),c.length>b.MAX_NAME_LENGTH&&(c=c.substring(0,b.MAX_NAME_LENGTH),a._InternalLogging.throwInternal(a.LoggingSeverity.WARNING,a._InternalMessageId.NameTooLong,"name is too long.  It has been truncated to "+b.MAX_NAME_LENGTH+" characters.",{name:c},!0))),c},b.sanitizeString=function(c){return c&&(c=a.Util.trim(c),c.toString().length>b.MAX_STRING_LENGTH&&(c=c.toString().substring(0,b.MAX_STRING_LENGTH),a._InternalLogging.throwInternal(a.LoggingSeverity.WARNING,a._InternalMessageId.StringValueTooLong,"string value is too long. It has been truncated to "+b.MAX_STRING_LENGTH+" characters.",{value:c},!0))),c},b.sanitizeUrl=function(c){return c&&(c=a.Util.trim(c),c.length>b.MAX_URL_LENGTH&&(c=c.substring(0,b.MAX_URL_LENGTH),a._InternalLogging.throwInternal(a.LoggingSeverity.WARNING,a._InternalMessageId.UrlTooLong,"url is too long, it has been truncated to "+b.MAX_URL_LENGTH+" characters.",{url:c},!0))),c},b.sanitizeMessage=function(c){return c&&c.length>b.MAX_MESSAGE_LENGTH&&(c=c.substring(0,b.MAX_MESSAGE_LENGTH),a._InternalLogging.throwInternal(a.LoggingSeverity.WARNING,a._InternalMessageId.MessageTruncated,"message is too long, it has been truncated to "+b.MAX_MESSAGE_LENGTH+" characters.",{message:c},!0)),c},b.sanitizeException=function(c){return c&&c.length>b.MAX_EXCEPTION_LENGTH&&(c=c.substring(0,b.MAX_EXCEPTION_LENGTH),a._InternalLogging.throwInternal(a.LoggingSeverity.WARNING,a._InternalMessageId.ExceptionTruncated,"exception is too long, it has been truncated to "+b.MAX_EXCEPTION_LENGTH+" characters.",{exception:c},!0)),c},b.sanitizeProperties=function(a){if(a){var c={};for(var d in a){var e=b.sanitizeString(a[d]);d=b.sanitizeKeyAndAddUniqueness(d,c),c[d]=e}a=c}return a},b.sanitizeMeasurements=function(a){if(a){var c={};for(var d in a){var e=a[d];d=b.sanitizeKeyAndAddUniqueness(d,c),c[d]=e}a=c}return a},b.padNumber=function(a){var b="00"+a;return b.substr(b.length-3)},b.MAX_NAME_LENGTH=150,b.MAX_STRING_LENGTH=1024,b.MAX_URL_LENGTH=2048,b.MAX_MESSAGE_LENGTH=32768,b.MAX_EXCEPTION_LENGTH=32768,b}();b.DataSanitizer=c}(b.Common||(b.Common={}))}(a.Telemetry||(a.Telemetry={}))}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){!function(b){var c=function(c){function d(d,e,f){var g=c.call(this)||this;return g.aiDataContract={ver:a.FieldType.Required,message:a.FieldType.Required,severityLevel:a.FieldType.Default,properties:a.FieldType.Default},d=d||a.Util.NotSpecified,g.message=b.Common.DataSanitizer.sanitizeMessage(d),g.properties=b.Common.DataSanitizer.sanitizeProperties(e),f&&(g.severityLevel=f),g}return __extends(d,c),d.envelopeType="Microsoft.ApplicationInsights.{0}.Message",d.dataType="MessageData",d}(AI.MessageData);b.Trace=c}(a.Telemetry||(a.Telemetry={}))}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var AI;!function(a){var b=function(a){function b(){var b=a.call(this)||this;return b.ver=2,b.properties={},b.measurements={},b=a.call(this)||this}return __extends(b,a),b}(Microsoft.Telemetry.Domain);a.EventData=b}(AI||(AI={}));var Microsoft;!function(a){!function(a){!function(b){var c=function(b){function c(c,d,e){var f=b.call(this)||this;return f.aiDataContract={ver:a.FieldType.Required,name:a.FieldType.Required,properties:a.FieldType.Default,measurements:a.FieldType.Default},f.name=a.Telemetry.Common.DataSanitizer.sanitizeString(c)||a.Util.NotSpecified,f.properties=a.Telemetry.Common.DataSanitizer.sanitizeProperties(d),f.measurements=a.Telemetry.Common.DataSanitizer.sanitizeMeasurements(e),f}return __extends(c,b),c.envelopeType="Microsoft.ApplicationInsights.{0}.Event",c.dataType="EventData",c}(AI.EventData);b.Event=c}(a.Telemetry||(a.Telemetry={}))}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var AI;!function(a){var b=function(){function a(){this.hasFullStack=!0,this.parsedStack=[]}return a}();a.ExceptionDetails=b}(AI||(AI={}));var AI;!function(a){var b=function(a){function b(){var b=a.call(this)||this;return b.ver=2,b.exceptions=[],b.properties={},b.measurements={},b=a.call(this)||this}return __extends(b,a),b}(Microsoft.Telemetry.Domain);a.ExceptionData=b}(AI||(AI={}));var AI;!function(a){var b=function(){function a(){}return a}();a.StackFrame=b}(AI||(AI={}));var Microsoft;!function(a){!function(a){!function(b){var c=function(b){function c(c,e,f,g,h){var i=b.call(this)||this;return i.aiDataContract={ver:a.FieldType.Required,handledAt:a.FieldType.Required,exceptions:a.FieldType.Required,severityLevel:a.FieldType.Default,properties:a.FieldType.Default,measurements:a.FieldType.Default},i.properties=a.Telemetry.Common.DataSanitizer.sanitizeProperties(f),i.measurements=a.Telemetry.Common.DataSanitizer.sanitizeMeasurements(g),i.handledAt=e||"unhandled",i.exceptions=[new d(c)],h&&(i.severityLevel=h),i}return __extends(c,b),c.CreateSimpleException=function(a,b,c,d,e,f,g){return{handledAt:g||"unhandled",exceptions:[{hasFullStack:!0,message:a,stack:e,typeName:b}]}},c.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",c.dataType="ExceptionData",c}(AI.ExceptionData);b.Exception=c;var d=function(c){function d(d){var e=c.call(this)||this;e.aiDataContract={id:a.FieldType.Default,outerId:a.FieldType.Default,typeName:a.FieldType.Required,message:a.FieldType.Required,hasFullStack:a.FieldType.Default,stack:a.FieldType.Default,parsedStack:a.FieldType.Array},e.typeName=b.Common.DataSanitizer.sanitizeString(d.name)||a.Util.NotSpecified,e.message=b.Common.DataSanitizer.sanitizeMessage(d.message)||a.Util.NotSpecified;var f=d.stack;return e.parsedStack=e.parseStack(f),e.stack=b.Common.DataSanitizer.sanitizeException(f),e.hasFullStack=a.Util.isArray(e.parsedStack)&&e.parsedStack.length>0,e}return __extends(d,c),d.prototype.parseStack=function(a){var b=void 0;if("string"==typeof a){var c=a.split("\n");b=[];for(var d=0,f=0,g=0;g<=c.length;g++){var h=c[g];if(e.regex.test(h)){var i=new e(c[g],d++);f+=i.sizeInBytes,b.push(i)}}if(f>32768)for(var j=0,k=b.length-1,l=0,m=j,n=k;j<k;){var o=b[j].sizeInBytes,p=b[k].sizeInBytes;if((l+=o+p)>32768){var q=n-m+1;b.splice(m,q);break}m=j,n=k,j++,k--}}return b},d}(AI.ExceptionDetails),e=function(b){function c(d,e){var f=b.call(this)||this;f.sizeInBytes=0,f.aiDataContract={level:a.FieldType.Required,method:a.FieldType.Required,assembly:a.FieldType.Default,fileName:a.FieldType.Default,line:a.FieldType.Default},f.level=e,f.method="<no_method>",f.assembly=a.Util.trim(d);var g=d.match(c.regex);return g&&g.length>=5&&(f.method=a.Util.trim(g[2])||f.method,f.fileName=a.Util.trim(g[4]),f.line=parseInt(g[5])||0),f.sizeInBytes+=f.method.length,f.sizeInBytes+=f.fileName.length,f.sizeInBytes+=f.assembly.length,f.sizeInBytes+=c.baseSize,f.sizeInBytes+=f.level.toString().length,f.sizeInBytes+=f.line.toString().length,f}return __extends(c,b),c.regex=/^([\s]+at)?(.*?)(\@|\s\(|\s)([^\(\@\n]+):([0-9]+):([0-9]+)(\)?)$/,c.baseSize=58,c}(AI.StackFrame);b._StackFrame=e}(a.Telemetry||(a.Telemetry={}))}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var AI;!function(a){var b=function(a){function b(){var b=a.call(this)||this;return b.ver=2,b.metrics=[],b.properties={},b=a.call(this)||this}return __extends(b,a),b}(Microsoft.Telemetry.Domain);a.MetricData=b}(AI||(AI={}));var AI;!function(a){!function(a){a[a.Measurement=0]="Measurement",a[a.Aggregation=1]="Aggregation"}(a.DataPointType||(a.DataPointType={}))}(AI||(AI={}));var AI;!function(a){var b=function(){function b(){this.kind=a.DataPointType.Measurement}return b}();a.DataPoint=b}(AI||(AI={}));var Microsoft;!function(a){!function(a){!function(b){!function(b){var c=function(b){function c(){var c=null!==b&&b.apply(this,arguments)||this;return c.aiDataContract={name:a.FieldType.Required,kind:a.FieldType.Default,value:a.FieldType.Required,count:a.FieldType.Default,min:a.FieldType.Default,max:a.FieldType.Default,stdDev:a.FieldType.Default},c}return __extends(c,b),c}(AI.DataPoint);b.DataPoint=c}(b.Common||(b.Common={}))}(a.Telemetry||(a.Telemetry={}))}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(b){!function(c){var d=function(d){function e(e,f,g,h,i,j){var k=d.call(this)||this;k.aiDataContract={ver:b.FieldType.Required,metrics:b.FieldType.Required,properties:b.FieldType.Default};var l=new a.ApplicationInsights.Telemetry.Common.DataPoint;return l.count=g>0?g:void 0,l.max=isNaN(i)||null===i?void 0:i,l.min=isNaN(h)||null===h?void 0:h,l.name=c.Common.DataSanitizer.sanitizeString(e)||b.Util.NotSpecified,l.value=f,k.metrics=[l],k.properties=b.Telemetry.Common.DataSanitizer.sanitizeProperties(j),k}return __extends(e,d),e.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",e.dataType="MetricData",e}(AI.MetricData);c.Metric=d}(b.Telemetry||(b.Telemetry={}))}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var AI;!function(a){var b=function(a){function b(){var b=a.call(this)||this;return b.ver=2,b.properties={},b.measurements={},b=a.call(this)||this}return __extends(b,a),b}(a.EventData);a.PageViewData=b}(AI||(AI={}));var Microsoft;!function(a){!function(a){!function(b){var c=function(c){function d(d,e,f,g,h){var i=c.call(this)||this;return i.aiDataContract={ver:a.FieldType.Required,name:a.FieldType.Default,url:a.FieldType.Default,duration:a.FieldType.Default,properties:a.FieldType.Default,measurements:a.FieldType.Default},i.url=b.Common.DataSanitizer.sanitizeUrl(e),i.name=b.Common.DataSanitizer.sanitizeString(d)||a.Util.NotSpecified,isNaN(f)||(i.duration=a.Util.msToTimeSpan(f)),i.properties=a.Telemetry.Common.DataSanitizer.sanitizeProperties(g),i.measurements=a.Telemetry.Common.DataSanitizer.sanitizeMeasurements(h),i}return __extends(d,c),d.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",d.dataType="PageviewData",d}(AI.PageViewData);b.PageView=c}(a.Telemetry||(a.Telemetry={}))}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var AI;!function(a){var b=function(a){function b(){var b=a.call(this)||this;return b.ver=2,b.properties={},b.measurements={},b=a.call(this)||this}return __extends(b,a),b}(a.PageViewData);a.PageViewPerfData=b}(AI||(AI={}));var Microsoft;!function(a){!function(a){!function(b){var c=function(c){function d(e,f,g,h,i){var j=c.call(this)||this;j.aiDataContract={ver:a.FieldType.Required,name:a.FieldType.Default,url:a.FieldType.Default,duration:a.FieldType.Default,perfTotal:a.FieldType.Default,networkConnect:a.FieldType.Default,sentRequest:a.FieldType.Default,receivedResponse:a.FieldType.Default,domProcessing:a.FieldType.Default,properties:a.FieldType.Default,measurements:a.FieldType.Default},j.isValid=!1;var k=d.getPerformanceTiming();if(k){var l=d.getDuration(k.navigationStart,k.loadEventEnd),m=d.getDuration(k.navigationStart,k.connectEnd),n=d.getDuration(k.requestStart,k.responseStart),o=d.getDuration(k.responseStart,k.responseEnd),p=d.getDuration(k.responseEnd,k.loadEventEnd);0==l?a._InternalLogging.throwInternal(a.LoggingSeverity.WARNING,a._InternalMessageId.ErrorPVCalc,"error calculating page view performance.",{total:l,network:m,request:n,response:o,dom:p}):d.shouldCollectDuration(l,m,n,o,p)?l<Math.floor(m)+Math.floor(n)+Math.floor(o)+Math.floor(p)?a._InternalLogging.throwInternal(a.LoggingSeverity.WARNING,a._InternalMessageId.ClientPerformanceMathError,"client performance math error.",{total:l,network:m,request:n,response:o,dom:p}):(j.durationMs=l,j.perfTotal=j.duration=a.Util.msToTimeSpan(l),j.networkConnect=a.Util.msToTimeSpan(m),j.sentRequest=a.Util.msToTimeSpan(n),j.receivedResponse=a.Util.msToTimeSpan(o),j.domProcessing=a.Util.msToTimeSpan(p),j.isValid=!0):a._InternalLogging.throwInternal(a.LoggingSeverity.WARNING,a._InternalMessageId.InvalidDurationValue,"Invalid page load duration value. Browser perf data won't be sent.",{total:l,network:m,request:n,response:o,dom:p})}return j.url=b.Common.DataSanitizer.sanitizeUrl(f),j.name=b.Common.DataSanitizer.sanitizeString(e)||a.Util.NotSpecified,j.properties=a.Telemetry.Common.DataSanitizer.sanitizeProperties(h),j.measurements=a.Telemetry.Common.DataSanitizer.sanitizeMeasurements(i),j}return __extends(d,c),d.prototype.getIsValid=function(){return this.isValid},d.prototype.getDurationMs=function(){return this.durationMs},d.getPerformanceTiming=function(){return d.isPerformanceTimingSupported()?window.performance.timing:null},d.isPerformanceTimingSupported=function(){return"undefined"!=typeof window&&window.performance&&window.performance.timing},d.isPerformanceTimingDataReady=function(){var a=window.performance.timing;return a.domainLookupStart>0&&a.navigationStart>0&&a.responseStart>0&&a.requestStart>0&&a.loadEventEnd>0&&a.responseEnd>0&&a.connectEnd>0&&a.domLoading>0},d.getDuration=function(a,b){var c=void 0;return isNaN(a)||isNaN(b)||(c=Math.max(b-a,0)),c},d.shouldCollectDuration=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];var c=navigator.userAgent;if(!!c&&-1!==c.toLowerCase().indexOf("googlebot"))return!1;for(var e=0;e<a.length;e++)if(a[e]>=d.MAX_DURATION_ALLOWED)return!1;return!0},d.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",d.dataType="PageviewPerformanceData",d.MAX_DURATION_ALLOWED=36e5,d}(AI.PageViewPerfData);b.PageViewPerformance=c}(a.Telemetry||(a.Telemetry={}))}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){
!function(b){var c=function(){function c(a){this._config=a,this._sender=new b.Sender(a),this.telemetryInitializers=[],"undefined"!=typeof window&&(this._sessionManager=new b.Context._SessionManager(a),this.application=new b.Context.Application,this.device=new b.Context.Device,this.internal=new b.Context.Internal(a),this.location=new b.Context.Location,this.user=new b.Context.User(a),this.operation=new b.Context.Operation,this.session=new b.Context.Session,this.sample=new b.Context.Sample(a.sampleRate())),this._addDefaultTelemetryInitializers()}return c.prototype.addTelemetryInitializer=function(a){this.telemetryInitializers.push(a)},c.prototype.track=function(a){return a?(a.name===b.Telemetry.PageView.envelopeType&&b._InternalLogging.resetInternalMessageCount(),this.session&&"string"!=typeof this.session.id&&this._sessionManager.update(),this._track(a)):b._InternalLogging.throwInternal(b.LoggingSeverity.CRITICAL,b._InternalMessageId.TrackArgumentsNotSpecified,"cannot call .track() with a null or undefined argument",null,!0),a},c.prototype._addDefaultTelemetryInitializers=function(){if(!this._config.isBrowserLinkTrackingEnabled()){var b=["/browserLinkSignalR/","/__browserLink/"],c=function(c){if(c.name===a.ApplicationInsights.Telemetry.RemoteDependencyData.envelopeType){var d=c.data;if(d&&d.baseData)for(var e=0;e<b.length;e++)if(d.baseData.name.indexOf(b[e])>=0)return!1}return!0};this.addTelemetryInitializer(c)}},c.prototype._track=function(a){this.session&&("string"==typeof this.session.id?this._applySessionContext(a,this.session):this._applySessionContext(a,this._sessionManager.automaticSession)),this._applyApplicationContext(a,this.application),this._applyDeviceContext(a,this.device),this._applyInternalContext(a,this.internal),this._applyLocationContext(a,this.location),this._applySampleContext(a,this.sample),this._applyUserContext(a,this.user),this._applyOperationContext(a,this.operation),a.iKey=this._config.instrumentationKey();var c=!1;try{for(var d=this.telemetryInitializers.length,e=0;e<d;++e){var f=this.telemetryInitializers[e];if(f&&!1===f.apply(null,[a])){c=!0;break}}}catch(a){c=!0,b._InternalLogging.throwInternal(b.LoggingSeverity.CRITICAL,b._InternalMessageId.TelemetryInitializerFailed,"One of telemetry initializers failed, telemetry item will not be sent: "+b.Util.getExceptionName(a),{exception:b.Util.dump(a)},!0)}if(!c)if(this._fixDepricatedValues(a),a.name===b.Telemetry.Metric.envelopeType||this.sample.isSampledIn(a)){var g=this._config.instrumentationKey().replace(/-/g,"");a.name=a.name.replace("{0}",g),this._sender.send(a)}else b._InternalLogging.throwInternal(b.LoggingSeverity.WARNING,b._InternalMessageId.TelemetrySampledAndNotSent,"Telemetry is sampled and not sent to the AI service.",{SampleRate:this.sample.sampleRate},!0);return a},c.prototype._applyApplicationContext=function(a,b){if(b){var c=new AI.ContextTagKeys;"string"==typeof b.ver&&(a.tags[c.applicationVersion]=b.ver),"string"==typeof b.build&&(a.tags[c.applicationBuild]=b.build)}},c.prototype._applyDeviceContext=function(a,b){var c=new AI.ContextTagKeys;b&&("string"==typeof b.id&&(a.tags[c.deviceId]=b.id),"string"==typeof b.ip&&(a.tags[c.deviceIp]=b.ip),"string"==typeof b.language&&(a.tags[c.deviceLanguage]=b.language),"string"==typeof b.locale&&(a.tags[c.deviceLocale]=b.locale),"string"==typeof b.model&&(a.tags[c.deviceModel]=b.model),void 0!==b.network&&(a.tags[c.deviceNetwork]=b.network),"string"==typeof b.oemName&&(a.tags[c.deviceOEMName]=b.oemName),"string"==typeof b.os&&(a.tags[c.deviceOS]=b.os),"string"==typeof b.osversion&&(a.tags[c.deviceOSVersion]=b.osversion),"string"==typeof b.resolution&&(a.tags[c.deviceScreenResolution]=b.resolution),"string"==typeof b.type&&(a.tags[c.deviceType]=b.type))},c.prototype._applyInternalContext=function(a,b){if(b){var c=new AI.ContextTagKeys;"string"==typeof b.agentVersion&&(a.tags[c.internalAgentVersion]=b.agentVersion),"string"==typeof b.sdkVersion&&(a.tags[c.internalSdkVersion]=b.sdkVersion)}},c.prototype._applyLocationContext=function(a,b){if(b){var c=new AI.ContextTagKeys;"string"==typeof b.ip&&(a.tags[c.locationIp]=b.ip)}},c.prototype._applyOperationContext=function(a,b){if(b){var c=new AI.ContextTagKeys;"string"==typeof b.id&&(a.tags[c.operationId]=b.id),"string"==typeof b.name&&(a.tags[c.operationName]=b.name),"string"==typeof b.parentId&&(a.tags[c.operationParentId]=b.parentId),"string"==typeof b.rootId&&(a.tags[c.operationRootId]=b.rootId),"string"==typeof b.syntheticSource&&(a.tags[c.operationSyntheticSource]=b.syntheticSource)}},c.prototype._applySampleContext=function(a,b){b&&(a.sampleRate=b.sampleRate)},c.prototype._applySessionContext=function(a,b){if(b){var c=new AI.ContextTagKeys;"string"==typeof b.id&&(a.tags[c.sessionId]=b.id),void 0!==b.isFirst&&(a.tags[c.sessionIsFirst]=b.isFirst)}},c.prototype._applyUserContext=function(a,b){if(b){var c=new AI.ContextTagKeys;"string"==typeof b.accountId&&(a.tags[c.userAccountId]=b.accountId),"string"==typeof b.agent&&(a.tags[c.userAgent]=b.agent),"string"==typeof b.id&&(a.tags[c.userId]=b.id),"string"==typeof b.authenticatedId&&(a.tags[c.userAuthUserId]=b.authenticatedId),"string"==typeof b.storeRegion&&(a.tags[c.userStoreRegion]=b.storeRegion)}},c.prototype._fixDepricatedValues=function(c){try{var d=c.data;if(d&&d.baseType===a.ApplicationInsights.Telemetry.RemoteDependencyData.dataType){var e=d.baseData;e&&this._fixRDDDepricatedValues(e)}}catch(a){b._InternalLogging.throwInternal(b.LoggingSeverity.WARNING,b._InternalMessageId.FailedToFixDepricatedValues,"Failed to parse the base data object, to fix the depricated values "+b.Util.getExceptionName(a),{exception:b.Util.dump(a)})}},c.prototype._fixRDDDepricatedValues=function(a){a.commandName&&(a.data=a.commandName,a.commandName=void 0),a.dependencyTypeName&&(a.type=a.dependencyTypeName,a.dependencyTypeName=void 0),a.value&&0!==a.value&&(a.duration=b.Util.msToTimeSpan(a.value),a.value=void 0),a.kind&&(a.kind=void 0),a.dependencySource&&(a.dependencySource=void 0),a.async&&(a.async=void 0),a.count&&(a.count=void 0),a.min&&(a.min=void 0),a.max&&(a.max=void 0),a.stdDev&&(a.stdDev=void 0),a.dependencyKind&&(a.dependencyKind=void 0)},c}();b.TelemetryContext=c}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(b){var c=function(a){function b(){return a.call(this)||this}return __extends(b,a),b}(a.Telemetry.Base);b.Data=c}(a.Telemetry||(a.Telemetry={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(b){!function(c){!function(c){var d=function(a){function c(c,d){var e=a.call(this)||this;return e.aiDataContract={baseType:b.FieldType.Required,baseData:b.FieldType.Required},e.baseType=c,e.baseData=d,e}return __extends(c,a),c}(a.Telemetry.Data);c.Data=d}(c.Common||(c.Common={}))}(b.Telemetry||(b.Telemetry={}))}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){!function(b){var c=function(){function c(a,b){this.pageViewPerformanceSent=!1,this.overridePageViewDuration=!1,this.overridePageViewDuration=b,this.appInsights=a}return c.prototype.trackPageView=function(c,d,e,f,g){var h=this;"string"!=typeof c&&(c=window.document&&window.document.title||""),"string"!=typeof d&&(d=window.location&&window.location.href||"");var i=!1,j=void 0;if(b.PageViewPerformance.isPerformanceTimingSupported()){var k=b.PageViewPerformance.getPerformanceTiming().navigationStart;j=b.PageViewPerformance.getDuration(k,+new Date),b.PageViewPerformance.shouldCollectDuration(j)||(j=void 0)}else this.appInsights.sendPageViewInternal(c,d,isNaN(g)?void 0:g,e,f),this.appInsights.flush(),i=!0;i||!this.overridePageViewDuration&&isNaN(g)||(this.appInsights.sendPageViewInternal(c,d,isNaN(g)?j:g,e,f),this.appInsights.flush(),i=!0);if(!b.PageViewPerformance.isPerformanceTimingSupported())return void a._InternalLogging.throwInternal(a.LoggingSeverity.WARNING,a._InternalMessageId.NavigationTimingNotSupported,"trackPageView: navigation timing API used for calculation of page duration is not supported in this browser. This page view will be collected without duration and timing info.");var l=setInterval(function(){try{if(b.PageViewPerformance.isPerformanceTimingDataReady()){clearInterval(l);var g=new b.PageViewPerformance(c,d,null,e,f);g.getIsValid()||i?(i||h.appInsights.sendPageViewInternal(c,d,g.getDurationMs(),e,f),h.pageViewPerformanceSent||(h.appInsights.sendPageViewPerformanceInternal(g),h.pageViewPerformanceSent=!0),h.appInsights.flush()):(h.appInsights.sendPageViewInternal(c,d,j,e,f),h.appInsights.flush())}else b.PageViewPerformance.getDuration(k,+new Date)>6e4&&(clearInterval(l),i||(h.appInsights.sendPageViewInternal(c,d,6e4,e,f),h.appInsights.flush()))}catch(b){a._InternalLogging.throwInternal(a.LoggingSeverity.CRITICAL,a._InternalMessageId.TrackPVFailedCalc,"trackPageView failed on page load calculation: "+a.Util.getExceptionName(b),{exception:a.Util.dump(b)})}},100)},c}();b.PageViewManager=c}(a.Telemetry||(a.Telemetry={}))}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){!function(b){var c=function(){function b(a){this.prevPageVisitDataKeyName="prevPageVisitData",this.pageVisitTimeTrackingHandler=a}return b.prototype.trackPreviousPageVisit=function(b,c){try{var d=this.restartPageVisitTimer(b,c);d&&this.pageVisitTimeTrackingHandler(d.pageName,d.pageUrl,d.pageVisitTime)}catch(b){a._InternalLogging.warnToConsole("Auto track page visit time failed, metric will not be collected: "+a.Util.dump(b))}},b.prototype.restartPageVisitTimer=function(b,c){try{var d=this.stopPageVisitTimer();return this.startPageVisitTimer(b,c),d}catch(b){return a._InternalLogging.warnToConsole("Call to restart failed: "+a.Util.dump(b)),null}},b.prototype.startPageVisitTimer=function(b,c){try{if(a.Util.canUseSessionStorage()){if(null!=a.Util.getSessionStorage(this.prevPageVisitDataKeyName))throw new Error("Cannot call startPageVisit consecutively without first calling stopPageVisit");var e=new d(b,c),f=JSON.stringify(e);a.Util.setSessionStorage(this.prevPageVisitDataKeyName,f)}}catch(b){a._InternalLogging.warnToConsole("Call to start failed: "+a.Util.dump(b))}},b.prototype.stopPageVisitTimer=function(){try{if(a.Util.canUseSessionStorage()){var b=Date.now(),c=a.Util.getSessionStorage(this.prevPageVisitDataKeyName);if(c){var d=JSON.parse(c);return d.pageVisitTime=b-d.pageVisitStartTime,a.Util.removeSessionStorage(this.prevPageVisitDataKeyName),d}return null}return null}catch(b){return a._InternalLogging.warnToConsole("Stop page visit timer failed: "+a.Util.dump(b)),null}},b}();b.PageVisitTimeManager=c;var d=function(){function a(a,b){this.pageVisitStartTime=Date.now(),this.pageName=a,this.pageUrl=b}return a}();b.PageVisitData=d}(a.Telemetry||(a.Telemetry={}))}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var AI;!function(a){!function(a){a[a.SQL=0]="SQL",a[a.Http=1]="Http",a[a.Other=2]="Other"}(a.DependencyKind||(a.DependencyKind={}))}(AI||(AI={}));var AI;!function(a){!function(a){a[a.Undefined=0]="Undefined",a[a.Aic=1]="Aic",a[a.Apmc=2]="Apmc"}(a.DependencySourceType||(a.DependencySourceType={}))}(AI||(AI={}));var AI;!function(a){var b=function(b){function c(){var c=b.call(this)||this;return c.ver=2,c.kind=a.DataPointType.Aggregation,c.dependencyKind=a.DependencyKind.Other,c.success=!0,c.dependencySource=a.DependencySourceType.Apmc,c.properties={},c.measurements={},c=b.call(this)||this}return __extends(c,b),c}(Microsoft.Telemetry.Domain);a.RemoteDependencyData=b}(AI||(AI={}));var Microsoft;!function(a){!function(a){!function(b){var c=function(c){function d(d,e,f,g,h,i,j,k,l){var m=c.call(this)||this;if(m.aiDataContract={id:a.FieldType.Required,ver:a.FieldType.Required,name:a.FieldType.Default,resultCode:a.FieldType.Default,duration:a.FieldType.Default,success:a.FieldType.Default,data:a.FieldType.Default,target:a.FieldType.Default,type:a.FieldType.Default,properties:a.FieldType.Default,measurements:a.FieldType.Default,kind:a.FieldType.Default,value:a.FieldType.Default,count:a.FieldType.Default,min:a.FieldType.Default,max:a.FieldType.Default,stdDev:a.FieldType.Default,dependencyKind:a.FieldType.Default,async:a.FieldType.Default,dependencySource:a.FieldType.Default,commandName:a.FieldType.Default,dependencyTypeName:a.FieldType.Default},m.id=d,m.duration=a.Util.msToTimeSpan(g),m.success=h,m.resultCode=i+"",m.dependencyKind=AI.DependencyKind.Http,m.type="Ajax",m.data=b.Common.DataSanitizer.sanitizeUrl(f),e&&e.length>0){var n=a.UrlHelper.parseUrl(e);if(m.target=n.host,null!=n.pathname){var o=0===n.pathname.length?"/":n.pathname;"/"!==o.charAt(0)&&(o="/"+o),m.name=b.Common.DataSanitizer.sanitizeString(j?j+" "+o:o)}else m.name=b.Common.DataSanitizer.sanitizeString(e)}else m.target=f,m.name=f;return m.properties=a.Telemetry.Common.DataSanitizer.sanitizeProperties(k),m.measurements=a.Telemetry.Common.DataSanitizer.sanitizeMeasurements(l),m}return __extends(d,c),d.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",d.dataType="RemoteDependencyData",d}(AI.RemoteDependencyData);b.RemoteDependencyData=c}(a.Telemetry||(a.Telemetry={}))}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){var b=function(){function b(){this.hashCodeGeneragor=new a.HashCodeScoreGenerator}return b.prototype.isEnabled=function(a,b){return this.hashCodeGeneragor.getHashCodeScore(a)<b},b}();a.SplitTest=b}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(b){b.Version="1.0.12";var c=function(){function c(e){var f=this;this._trackAjaxAttempts=0,this.config=e||{};var g=c.defaultConfig;if(void 0!==g)for(var h in g)void 0===this.config[h]&&(this.config[h]=g[h]);b._InternalLogging.verboseLogging=function(){return f.config.verboseLogging},b._InternalLogging.enableDebugExceptions=function(){return f.config.enableDebug};var i={instrumentationKey:function(){return f.config.instrumentationKey},accountId:function(){return f.config.accountId},sessionRenewalMs:function(){return f.config.sessionRenewalMs},sessionExpirationMs:function(){return f.config.sessionExpirationMs},endpointUrl:function(){return f.config.endpointUrl},emitLineDelimitedJson:function(){return f.config.emitLineDelimitedJson},maxBatchSizeInBytes:function(){return!f.config.isBeaconApiDisabled&&b.Util.IsBeaconApiSupported()?Math.min(f.config.maxBatchSizeInBytes,b.Sender.MaxBeaconPayloadSize):f.config.maxBatchSizeInBytes},maxBatchInterval:function(){return f.config.maxBatchInterval},disableTelemetry:function(){return f.config.disableTelemetry},sampleRate:function(){return f.config.samplingPercentage},cookieDomain:function(){return f.config.cookieDomain},enableSessionStorageBuffer:function(){return(f.config.isBeaconApiDisabled||!b.Util.IsBeaconApiSupported())&&f.config.enableSessionStorageBuffer},isRetryDisabled:function(){return f.config.isRetryDisabled},isBeaconApiDisabled:function(){return f.config.isBeaconApiDisabled},sdkExtension:function(){return f.config.sdkExtension},isBrowserLinkTrackingEnabled:function(){return f.config.isBrowserLinkTrackingEnabled}};this.config.isCookieUseDisabled&&b.Util.disableCookies(),this.config.isStorageUseDisabled&&b.Util.disableStorage(),this.context=new b.TelemetryContext(i),this._pageViewManager=new a.ApplicationInsights.Telemetry.PageViewManager(this,this.config.overridePageViewDuration),this._eventTracking=new d("trackEvent"),this._eventTracking.action=function(a,c,d,e,g){g?isNaN(g.duration)&&(g.duration=d):g={duration:d};var h=new b.Telemetry.Event(a,e,g),i=new b.Telemetry.Common.Data(b.Telemetry.Event.dataType,h),j=new b.Telemetry.Common.Envelope(i,b.Telemetry.Event.envelopeType);f.context.track(j)},this._pageTracking=new d("trackPageView"),this._pageTracking.action=function(a,b,c,d,e){f.sendPageViewInternal(a,b,c,d,e)},this._pageVisitTimeManager=new b.Telemetry.PageVisitTimeManager(function(a,b,c){return f.trackPageVisitTime(a,b,c)}),this.config.disableAjaxTracking||(this._ajaxMonitor=new a.ApplicationInsights.AjaxMonitor(this))}return c.prototype.sendPageViewInternal=function(a,c,d,e,f){var g=new b.Telemetry.PageView(a,c,d,e,f),h=new b.Telemetry.Common.Data(b.Telemetry.PageView.dataType,g),i=new b.Telemetry.Common.Envelope(h,b.Telemetry.PageView.envelopeType);this.context.track(i),this._trackAjaxAttempts=0},c.prototype.sendPageViewPerformanceInternal=function(a){var c=new b.Telemetry.Common.Data(b.Telemetry.PageViewPerformance.dataType,a),d=new b.Telemetry.Common.Envelope(c,b.Telemetry.PageViewPerformance.envelopeType);this.context.track(d)},c.prototype.startTrackPage=function(a){try{"string"!=typeof a&&(a=window.document&&window.document.title||""),this._pageTracking.start(a)}catch(a){b._InternalLogging.throwInternal(b.LoggingSeverity.CRITICAL,b._InternalMessageId.StartTrackFailed,"startTrackPage failed, page view may not be collected: "+b.Util.getExceptionName(a),{exception:b.Util.dump(a)})}},c.prototype.stopTrackPage=function(a,c,d,e){try{"string"!=typeof a&&(a=window.document&&window.document.title||""),"string"!=typeof c&&(c=window.location&&window.location.href||""),this._pageTracking.stop(a,c,d,e),this.config.autoTrackPageVisitTime&&this._pageVisitTimeManager.trackPreviousPageVisit(a,c)}catch(a){b._InternalLogging.throwInternal(b.LoggingSeverity.CRITICAL,b._InternalMessageId.StopTrackFailed,"stopTrackPage failed, page view will not be collected: "+b.Util.getExceptionName(a),{exception:b.Util.dump(a)})}},c.prototype.trackPageView=function(a,c,d,e,f){try{this._pageViewManager.trackPageView(a,c,d,e,f),this.config.autoTrackPageVisitTime&&this._pageVisitTimeManager.trackPreviousPageVisit(a,c)}catch(a){b._InternalLogging.throwInternal(b.LoggingSeverity.CRITICAL,b._InternalMessageId.TrackPVFailed,"trackPageView failed, page view will not be collected: "+b.Util.getExceptionName(a),{exception:b.Util.dump(a)})}},c.prototype.startTrackEvent=function(a){try{this._eventTracking.start(a)}catch(a){b._InternalLogging.throwInternal(b.LoggingSeverity.CRITICAL,b._InternalMessageId.StartTrackEventFailed,"startTrackEvent failed, event will not be collected: "+b.Util.getExceptionName(a),{exception:b.Util.dump(a)})}},c.prototype.stopTrackEvent=function(a,c,d){try{this._eventTracking.stop(a,void 0,c,d)}catch(a){b._InternalLogging.throwInternal(b.LoggingSeverity.CRITICAL,b._InternalMessageId.StopTrackEventFailed,"stopTrackEvent failed, event will not be collected: "+b.Util.getExceptionName(a),{exception:b.Util.dump(a)})}},c.prototype.trackEvent=function(a,c,d){try{var e=new b.Telemetry.Event(a,c,d),f=new b.Telemetry.Common.Data(b.Telemetry.Event.dataType,e),g=new b.Telemetry.Common.Envelope(f,b.Telemetry.Event.envelopeType);this.context.track(g)}catch(a){b._InternalLogging.throwInternal(b.LoggingSeverity.CRITICAL,b._InternalMessageId.TrackEventFailed,"trackEvent failed, event will not be collected: "+b.Util.getExceptionName(a),{exception:b.Util.dump(a)})}},c.prototype.trackDependency=function(a,c,d,e,f,g,h,i,j){if(-1===this.config.maxAjaxCallsPerView||this._trackAjaxAttempts<this.config.maxAjaxCallsPerView){var k=new b.Telemetry.RemoteDependencyData(a,d,e,f,g,h,c,i,j),l=new b.Telemetry.Common.Data(b.Telemetry.RemoteDependencyData.dataType,k),m=new b.Telemetry.Common.Envelope(l,b.Telemetry.RemoteDependencyData.envelopeType);this.context.track(m)}else this._trackAjaxAttempts===this.config.maxAjaxCallsPerView&&b._InternalLogging.throwInternal(b.LoggingSeverity.CRITICAL,b._InternalMessageId.MaxAjaxPerPVExceeded,"Maximum ajax per page view limit reached, ajax monitoring is paused until the next trackPageView(). In order to increase the limit set the maxAjaxCallsPerView configuration parameter.",!0);++this._trackAjaxAttempts},c.prototype.trackAjax=function(a,b,c,d,e,f,g){this.trackDependency(a,null,b,c,d,e,f)},c.prototype.trackException=function(a,c,d,e,f){try{if(!b.Util.isError(a))try{throw new Error(a)}catch(b){a=b}var g=new b.Telemetry.Exception(a,c,d,e,f),h=new b.Telemetry.Common.Data(b.Telemetry.Exception.dataType,g),i=new b.Telemetry.Common.Envelope(h,b.Telemetry.Exception.envelopeType);this.context.track(i)}catch(a){b._InternalLogging.throwInternal(b.LoggingSeverity.CRITICAL,b._InternalMessageId.TrackExceptionFailed,"trackException failed, exception will not be collected: "+b.Util.getExceptionName(a),{exception:b.Util.dump(a)})}},c.prototype.trackMetric=function(a,c,d,e,f,g){try{var h=new b.Telemetry.Metric(a,c,d,e,f,g),i=new b.Telemetry.Common.Data(b.Telemetry.Metric.dataType,h),j=new b.Telemetry.Common.Envelope(i,b.Telemetry.Metric.envelopeType);this.context.track(j)}catch(a){b._InternalLogging.throwInternal(b.LoggingSeverity.CRITICAL,b._InternalMessageId.TrackMetricFailed,"trackMetric failed, metric will not be collected: "+b.Util.getExceptionName(a),{exception:b.Util.dump(a)})}},c.prototype.trackTrace=function(a,c,d){try{var e=new b.Telemetry.Trace(a,c,d),f=new b.Telemetry.Common.Data(b.Telemetry.Trace.dataType,e),g=new b.Telemetry.Common.Envelope(f,b.Telemetry.Trace.envelopeType);this.context.track(g)}catch(a){b._InternalLogging.throwInternal(b.LoggingSeverity.WARNING,b._InternalMessageId.TrackTraceFailed,"trackTrace failed, trace will not be collected: "+b.Util.getExceptionName(a),{exception:b.Util.dump(a)})}},c.prototype.trackPageVisitTime=function(a,b,c){var d={PageName:a,PageUrl:b};this.trackMetric("PageVisitTime",c,1,c,c,d)},c.prototype.flush=function(a){void 0===a&&(a=!0);try{this.context._sender.triggerSend(a)}catch(a){b._InternalLogging.throwInternal(b.LoggingSeverity.CRITICAL,b._InternalMessageId.FlushFailed,"flush failed, telemetry will not be collected: "+b.Util.getExceptionName(a),{exception:b.Util.dump(a)})}},c.prototype.setAuthenticatedUserContext=function(a,c){try{this.context.user.setAuthenticatedUserContext(a,c)}catch(a){b._InternalLogging.throwInternal(b.LoggingSeverity.WARNING,b._InternalMessageId.SetAuthContextFailed,"Setting auth user context failed. "+b.Util.getExceptionName(a),{exception:b.Util.dump(a)},!0)}},c.prototype.clearAuthenticatedUserContext=function(){try{this.context.user.clearAuthenticatedUserContext()}catch(a){b._InternalLogging.throwInternal(b.LoggingSeverity.WARNING,b._InternalMessageId.SetAuthContextFailed,"Clearing auth user context failed. "+b.Util.getExceptionName(a),{exception:b.Util.dump(a)},!0)}},c.prototype.SendCORSException=function(c){var d=a.ApplicationInsights.Telemetry.Exception.CreateSimpleException("Script error.","Error","unknown","unknown","The browser's same-origin policy prevents us from getting the details of this exception. Consider using 'crossorigin' attribute.",0,null);d.properties=c;var e=new b.Telemetry.Common.Data(b.Telemetry.Exception.dataType,d),f=new b.Telemetry.Common.Envelope(e,b.Telemetry.Exception.envelopeType);this.context.track(f)},c.prototype._onerror=function(a,c,d,e,f){try{var g={url:c||document.URL};if(b.Util.isCrossOriginError(a,c,d,e,f))this.SendCORSException(g);else{if(!b.Util.isError(f)){var h="window.onerror@"+g.url+":"+d+":"+(e||0);f=new Error(a),f.stack=h}this.trackException(f,null,g)}}catch(a){var i=f?f.name+", "+f.message:"null",j=b.Util.dump(a);b._InternalLogging.throwInternal(b.LoggingSeverity.CRITICAL,b._InternalMessageId.ExceptionWhileLoggingError,"_onerror threw exception while logging error, error will not be collected: "+b.Util.getExceptionName(a),{exception:j,errorString:i})}},c}();b.AppInsights=c;var d=function(){function a(a){this._name=a,this._events={}}return a.prototype.start=function(a){void 0!==this._events[a]&&b._InternalLogging.throwInternal(b.LoggingSeverity.WARNING,b._InternalMessageId.StartCalledMoreThanOnce,"start was called more than once for this event without calling stop.",{name:this._name,key:a},!0),this._events[a]=+new Date},a.prototype.stop=function(a,c,d,e){var f=this._events[a];if(isNaN(f))b._InternalLogging.throwInternal(b.LoggingSeverity.WARNING,b._InternalMessageId.StopCalledWithoutStart,"stop was called without a corresponding start.",{name:this._name,key:a},!0);else{var g=+new Date,h=b.Telemetry.PageViewPerformance.getDuration(f,g);this.action(a,c,h,d,e)}delete this._events[a],this._events[a]=void 0},a}()}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(a){var b=function(){function b(){}return b.reset=function(){b.isEnabled()&&(a.Util.setSessionStorage(b.ITEMS_QUEUED_KEY,"0"),a.Util.setSessionStorage(b.ISSUES_REPORTED_KEY,"0"),b.itemsRestoredFromSessionBuffer=0)},b.isEnabled=function(){return b.enabled&&null!=b.appInsights&&b.appInsights.context._sender._XMLHttpRequestSupported&&a.Util.canUseSessionStorage()},b.getIssuesReported=function(){return!b.isEnabled()||isNaN(+a.Util.getSessionStorage(b.ISSUES_REPORTED_KEY))?0:+a.Util.getSessionStorage(b.ISSUES_REPORTED_KEY)},b.incrementItemsQueued=function(){try{if(b.isEnabled()){var c=b.getNumberOfLostItems();++c,a.Util.setSessionStorage(b.ITEMS_QUEUED_KEY,c.toString())}}catch(a){}},b.decrementItemsQueued=function(c){try{if(b.isEnabled()){var d=b.getNumberOfLostItems();d-=c,d<0&&(d=0),a.Util.setSessionStorage(b.ITEMS_QUEUED_KEY,d.toString())}}catch(a){}},b.getNumberOfLostItems=function(){var c=0;try{b.isEnabled()&&(c=isNaN(+a.Util.getSessionStorage(b.ITEMS_QUEUED_KEY))?0:+a.Util.getSessionStorage(b.ITEMS_QUEUED_KEY))}catch(a){c=0}return c},b.reportLostItems=function(){try{if(b.isEnabled()&&b.getIssuesReported()<b.LIMIT_PER_SESSION&&b.getNumberOfLostItems()>0){var c=b.getNumberOfLostItems()-b.itemsRestoredFromSessionBuffer;b.appInsights.trackTrace('AI (Internal): Internal report DATALOSS:"'+c+'"',null),b.appInsights.flush();var d=b.getIssuesReported();++d,a.Util.setSessionStorage(b.ISSUES_REPORTED_KEY,d.toString())}}catch(b){a._InternalLogging.throwInternal(a.LoggingSeverity.CRITICAL,a._InternalMessageId.FailedToReportDataLoss,"Failed to report data loss: "+a.Util.getExceptionName(b),{exception:a.Util.dump(b)})}finally{try{b.reset()}catch(a){}}},b.enabled=!1,b.itemsRestoredFromSessionBuffer=0,b.LIMIT_PER_SESSION=10,b.ITEMS_QUEUED_KEY="AI_itemsQueued",b.ISSUES_REPORTED_KEY="AI_lossIssuesReported",b}();a.DataLossAnalyzer=b}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(b){var c=function(){function c(b){b.queue=b.queue||[];var d=b.config||{};if(d&&!d.instrumentationKey)if(d=b,d.iKey)a.ApplicationInsights.Version="0.10.0.0",d.instrumentationKey=d.iKey;else{if(!d.applicationInsightsId)throw new Error("Cannot load Application Insights SDK, no instrumentationKey was provided.");a.ApplicationInsights.Version="0.7.2.0",d.instrumentationKey=d.applicationInsightsId}d=c.getDefaultConfig(d),this.snippet=b,this.config=d}return c.prototype.loadAppInsights=function(){var b=new a.ApplicationInsights.AppInsights(this.config);if(this.config.iKey){var c=b.trackPageView;b.trackPageView=function(a,d,e){c.apply(b,[null,a,d,e])}}"function"==typeof this.snippet.logPageView&&(b.logPageView=function(a,c,d){b.trackPageView(null,a,c,d)});return"function"==typeof this.snippet.logEvent&&(b.logEvent=function(a,c,d){b.trackEvent(a,c,d)}),b},c.prototype.emptyQueue=function(){try{if(a.ApplicationInsights.Util.isArray(this.snippet.queue)){for(var c=this.snippet.queue.length,d=0;d<c;d++){(0,this.snippet.queue[d])()}this.snippet.queue=void 0,delete this.snippet.queue}}catch(c){var e={};c&&"function"==typeof c.toString&&(e.exception=c.toString()),a.ApplicationInsights._InternalLogging.throwInternal(b.LoggingSeverity.WARNING,b._InternalMessageId.FailedToSendQueuedTelemetry,"Failed to send queued telemetry",e)}},c.prototype.pollInteralLogs=function(b){return setInterval(function(){for(var c=a.ApplicationInsights._InternalLogging.queue,d=c.length,e=0;e<d;e++)b.trackTrace(c[e].message);c.length=0},this.config.diagnosticLogInterval)},c.prototype.addHousekeepingBeforeUnload=function(b){if(!b.config.disableFlushOnBeforeUnload&&"onbeforeunload"in window){var c=function(){b.context._sender.triggerSend(),b.context._sessionManager.backup()};a.ApplicationInsights.Util.addEventHandler("beforeunload",c)||a.ApplicationInsights._InternalLogging.throwInternal(a.ApplicationInsights.LoggingSeverity.CRITICAL,a.ApplicationInsights._InternalMessageId.FailedToAddHandlerForOnBeforeUnload,"Could not add handler for beforeunload")}},c.getDefaultConfig=function(a){return a||(a={}),a.endpointUrl=a.endpointUrl||"https://dc.services.visualstudio.com/v2/track",a.sessionRenewalMs=18e5,a.sessionExpirationMs=864e5,a.maxBatchSizeInBytes=a.maxBatchSizeInBytes>0?a.maxBatchSizeInBytes:102400,a.maxBatchInterval=isNaN(a.maxBatchInterval)?15e3:a.maxBatchInterval,a.enableDebug=b.Util.stringToBoolOrDefault(a.enableDebug),a.disableExceptionTracking=b.Util.stringToBoolOrDefault(a.disableExceptionTracking),a.disableTelemetry=b.Util.stringToBoolOrDefault(a.disableTelemetry),a.verboseLogging=b.Util.stringToBoolOrDefault(a.verboseLogging),a.emitLineDelimitedJson=b.Util.stringToBoolOrDefault(a.emitLineDelimitedJson),a.diagnosticLogInterval=a.diagnosticLogInterval||1e4,a.autoTrackPageVisitTime=b.Util.stringToBoolOrDefault(a.autoTrackPageVisitTime),(isNaN(a.samplingPercentage)||a.samplingPercentage<=0||a.samplingPercentage>=100)&&(a.samplingPercentage=100),a.disableAjaxTracking=b.Util.stringToBoolOrDefault(a.disableAjaxTracking),a.maxAjaxCallsPerView=isNaN(a.maxAjaxCallsPerView)?500:a.maxAjaxCallsPerView,a.isBeaconApiDisabled=b.Util.stringToBoolOrDefault(a.isBeaconApiDisabled,!0),a.disableCorrelationHeaders=b.Util.stringToBoolOrDefault(a.disableCorrelationHeaders),a.disableFlushOnBeforeUnload=b.Util.stringToBoolOrDefault(a.disableFlushOnBeforeUnload),a.enableSessionStorageBuffer=b.Util.stringToBoolOrDefault(a.enableSessionStorageBuffer,!0),a.isRetryDisabled=b.Util.stringToBoolOrDefault(a.isRetryDisabled),a.isCookieUseDisabled=b.Util.stringToBoolOrDefault(a.isCookieUseDisabled),a.isStorageUseDisabled=b.Util.stringToBoolOrDefault(a.isStorageUseDisabled),a.isBrowserLinkTrackingEnabled=b.Util.stringToBoolOrDefault(a.isBrowserLinkTrackingEnabled),a},c}();b.Initialization=c}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(a){!function(b){try{if("undefined"!=typeof window&&"undefined"!=typeof JSON){if(void 0===window.appInsights)a.ApplicationInsights.AppInsights.defaultConfig=a.ApplicationInsights.Initialization.getDefaultConfig();else{var c=window.appInsights||{},d=new a.ApplicationInsights.Initialization(c),e=d.loadAppInsights();for(var f in e)c[f]=e[f];d.emptyQueue(),d.pollInteralLogs(e),d.addHousekeepingBeforeUnload(e)}}}catch(b){a.ApplicationInsights._InternalLogging.warnToConsole("Failed to initialize AppInsights JS SDK: "+b.message)}}(a.ApplicationInsights||(a.ApplicationInsights={}))}(Microsoft||(Microsoft={}));
//# sourceMappingURL=ai.0.js.map